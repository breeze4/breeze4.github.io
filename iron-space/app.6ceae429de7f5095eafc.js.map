{"version":3,"sources":["webpack:///app.6ceae429de7f5095eafc.js","webpack:///./app/index.js","webpack:///./app/reducers/reducers.js","webpack:///./app/api/actions.js","webpack:///./app/reducers/gameLoop.js","webpack:///./app/initialState.js","webpack:///./app/reducers/onTickProjectiles.js","webpack:///./app/reducers/movement.js","webpack:///./app/reducers/onTickShip.js","webpack:///./app/reducers/onTickShips.js","webpack:///./app/reducers/onTickMessages.js","webpack:///./app/reducers/onTickFPS.js","webpack:///./app/reducers/fireWeapon.js","webpack:///./app/reducers/landOnPlanet.js","webpack:///./app/api/doCirclesOverlap.js","webpack:///./app/reducers/addMessage.js","webpack:///./app/reducers/collisionDetector.js","webpack:///./app/reducers/collisionResolver.js","webpack:///./app/canvas.js","webpack:///./app/app.js","webpack:///./app/components/Message.js","webpack:///./app/main.css?afba","webpack:///./app/main.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_react","_react2","_reactDom","_reactDom2","_reactRedux","_redux","_reducers","_reducers2","_app","_app2","store","createStore","props","render","createElement","Provider","document","getElementById","200","base","state","arguments","length","undefined","baseInitialState","action","type","_actions","ADD","Object","assign","count","defineProperty","value","_gameLoop","_gameLoop2","spaceApp","combineReducers","gameLoop","201","add","num","attemptToLandOnPlanet","ship","ATTEMPT_TO_LAND","addShip","rotation","getRandomArbitrary","x","y","ADD_SHIP","_immutable","Map","height","width","positionX","positionY","min","max","Math","random","handleInputKeyDown","keyDown","actionType","MOVEMENT_KEYS","has","MOVE_KEY_DOWN","KEY_DOWN","key","handleInputKeyUp","keyUp","MOVE_KEY_UP","UNHANDLED","loopTick","TICK","KEY_UP","Set","203","onTick","updatedStateWithFPS","_onTickFPS","onTickFPS","updatedStateWithPlayerShipMovement","_onTickShip","onTickShip","updatedStateWithShipsMovement","_onTickShips","onTickShips","updatedStateWithProjectileMovement","_onTickProjectiles","onTickProjectiles","updatedStateWithCollisions","_collisionDetector","collisionDetector","updatedStateWithCollisionsResolved","_collisionResolver","collisionResolver","updatedStateWithCollisionsMessagesUpdated","_onTickMessages","onTickMessages","_initialState2","setIn","_fireWeapon","fireWeapon","_landOnPlanet","landOnPlanet","get","updatedCount","getIn","updatedState","shipWithId","set","push","_initialState","204","SPEED","WIDTH","window","innerWidth","HEIGHT","innerHeight","initialState","camera","fieldOfView","aspect","near","far","position","z","lookAt","id","meshData","scale","jsonUrl","ships","list","List","keysDown","projectiles","collisions","planets","name","messages","text","ticks","fps","205","filterVisibleProjectiles","projectile","index","projectilesAfterPruningOffscreen","filter","stateWithVisibleProjectilesOnly","stateWithProjectilePositionChanges","reduce","_calculatePositionCha","_movement","calculatePositionChange","updatedProjectile","206","distance","rotationRadians","distanceY","sin","distanceX","cos","distanceZ","calculateShipPosition","speed","207","buildKeysDownActions","defaultAmount","activeActions","MOVE_SHIP_FW","MOVE_SHIP_BW","TURN_SHIP","amount","activeKeysDown","FIRE_WEAPON","208","209","updatedMessages","message","map","210","newTimeSeconds","trunc","Date","valueOf","timeDelta","startTimeMilliSeconds","MAX_SAMPLING_TIME_MS_DELTA","avgFps","211","newProjectileProps","currentProjectiles","updatedProjectiles","212","closestPlanet","findClosestPlanetInHailing","messageCount","updatedMsgCount","hailResult","hailPlanet","existingMsgs","withinRange","LANDING_RANGE","landingResult","attemptLanding","newMsg","previousHailMessageIndex","findIndex","existingMsgsWithoutHail","delete","_addMessage2","updatedMsgs","concat","planet","status","allowedToLand","planetsWithinRangeOfShip","HAILING_RANGE","size","first","closestPlanetSoFar","range","planetX","planetY","planetHeight","planetWidth","shipX","shipY","shipHeight","shipWidth","planetRadius","shipRadius","planetCircle","center","top","left","radius","shipCircle","_doCirclesOverlap2","_doCirclesOverlap","_addMessage","213","doCirclesOverlap","circle1","circle2","dx","dy","dSqr","radiusSumSqr","214","addMessage","updatedMsgList","215","findOverlap","obj1","obj2","obj1Height","obj1Width","obj1X","obj1Y","obj2Height","obj2Width","obj2X","obj2Y","obj1Radius","obj2Radius","projectileIndex","existingCollisionsDetected","collisionsFound","216","resolveCollision","collision","projectileId","shipId","shipIndex","stateWithoutProjectile","deleteIn","stateWithoutShip","stateWithResolvedCollisions","stateWithMessage","217","initShip","shipMeshData","loader","_three","JSONLoader","load","geometry","materials","material","MeshNormalMaterial","mesh","Mesh","translation","scene","geo","EdgesGeometry","mat","LineBasicMaterial","color","linewidth","wireframe","LineSegments","rotateMesh","init","_store","_unsubscribe","subscribe","Scene","getState","initCamera","initLights","initRenderer","body","appendChild","renderer","domElement","light","AmbientLight","cameraData","PerspectiveCamera","Vector3","WebGLRenderer","antialias","setSize","requestAnimationFrame","_threex","220","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","updateShip","shipState","_createClass","defineProperties","target","i","descriptor","protoProps","staticProps","_bluebird","_bluebird2","_Message","_Message2","LOOP_INTERVALS","AppComponent","_PureComponent","this","_this","getPrototypeOf","_loopInterval","loopRequest","onButtonClick","_onButtonClick","bind","onKeyDown","_onKeyDown","onKeyUp","_onKeyUp","onLoopTick","_onLoopTick","_this2","className","onClick","_renderMessages","data","event","_ship","_renderer","_scene","_camera","setTimeout","_this3","addEventListener","_initRenderer","_initCamera","_lights","_initLights","_initShip","then","shipMesh","removeEventListener","clearTimeout","_this4","promise","resolve","reject","jsonData","PureComponent","propTypes","PropTypes","number","object","mapStateToProps","mapDispatchToProps","dispatch","App","connect","224","Message","_Component","apply","messageText","Component","225","content","locals","226","227","toString","result","item","join","modules","mediaQuery","alreadyImportedModules","228","addStylesToDom","styles","options","domStyle","stylesInDom","refs","j","parts","addStyle","listToStyles","newStyles","css","media","sourceMap","part","insertStyleElement","styleElement","head","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","Error","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createLinkElement","linkElement","rel","update","remove","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","updateLink","href","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","setAttribute","unescape","encodeURIComponent","JSON","stringify","blob","oldSrc","memoize","fn","memo","isOldIE","test","navigator","userAgent","toLowerCase","getElementsByTagName","newList","mayRemove","textStore","replacement","Boolean"],"mappings":"AAAAA,cAAc,EAAE,IAEVC,EACA,SAASC,EAAQC,EAASC,GAE/B,YA0BA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GC/BxF,GAAAG,GAAAL,EAAA,GDSKM,EAAUL,EAAuBI,GCRtCE,EAAAP,EAAA,IDYKQ,EAAaP,EAAuBM,GCXzCE,EAAAT,EAAA,KACAU,EAAAV,EAAA,KACAW,EAAAX,EAAA,KDiBKY,EAAaX,EAAuBU,GCdzCE,GADAb,EAAA,KACAA,EAAA,MDoBKc,EAAQb,EAAuBY,EClBpCb,GAAA,IAEA,IAAIe,MAAQL,EAAAM,aAAAJ,EAAAR,SAENa,IAGNT,GAAAJ,QAASc,OACPZ,EAAAF,QAAAe,cAAAV,EAAAW,UAAUL,MAAOA,GACfT,EAAAF,QAAAe,cAAAL,EAAAV,QAASa,IAEXI,SAASC,eAAe,UDyBpBC,IACA,SAASzB,EAAQC,EAASC,GAE/B,YAcA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GEtDxF,QAASsB,KAAuC,GAAlCC,GAAkCC,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAA1BG,EAAkBC,EAAQJ,UAAA,EAC9C,QAAQI,EAAOC,MACb,IAAAC,GAAAC,IACE,MAAOC,QAAOC,UAAWV,GACvBW,MAAOX,EAAMW,MAAQ,GAEzB,SACE,MAAOX,IFmCZS,OAAOG,eAAetC,EAAS,cAC7BuC,UEnDH,IAAA5B,GAAAV,EAAA,KACAgC,EAAAhC,EAAA,KACAuC,EAAAvC,EAAA,KF0DKwC,EAAavC,EAAuBsC,GExDnCV,GACJO,MAAO,GAcHK,KAAW/B,EAAAgC,kBACflB,OACAmB,oBFkED5C,GAAQK,QE/DMqC,GFmETG,IACA,SAAS9C,EAAQC,EAASC,GAE/B,YGlFM,SAAS6C,GAAIC,GAClB,OAAQf,KAAME,EAAKa,OAGd,QAASC,GAAsBC,GACpC,OACEjB,KAAMkB,EACND,KAAMA,GAIH,QAASE,KACd,GAAMC,GAAWC,EAAmB,EAAG,KACjCC,EAAID,EAAmB,GAAI,KAC3BE,EAAIF,EAAmB,IAAK,IAClC,QACErB,KAAMwB,EACNP,KAAM,GAAAQ,GAAAC,KACJC,OAAQ,GACRC,MAAO,GACPR,SAAUA,EACVS,UAAWP,EACXQ,UAAWP,KAKjB,QAASF,GAAmBU,EAAKC,GAC/B,MAAOC,MAAKC,UAAYF,EAAMD,GAAOA,EAKhC,QAASI,GAAmBC,GACjC,GAAIC,SAMJ,OAJEA,GADEC,EAAcC,IAAIH,GACPI,EAEAC,GAGbzC,KAAMqC,EACNK,IAAKN,GAIF,QAASO,GAAiBC,GAC/B,GAAIP,SAMJ,OAJEA,GADEC,EAAcC,IAAIK,GACPC,EAEAC,GAGb9C,KAAMqC,EACNK,IAAKE,GAIF,QAASG,KACd,OACE/C,KAAMgD,GHuBT7C,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EAAQkD,gBAAkBlD,EAAQgF,KAAOhF,EAAQ6E,YAAc7E,EAAQiF,OAASjF,EAAQwE,cAAgBxE,EAAQyE,SAAWzE,EAAQ8E,UAAY9E,EAAQwD,SAAWxD,EAAQkC,IAAML,OAChL7B,EGxFe8C,MHyFf9C,EGrFegD,wBHsFfhD,EG/EemD,UHgFfnD,EG1DemE,qBH2DfnE,EG9Ce2E,mBH+Cf3E,EGlCe+E,UAvEhB,IAAAtB,GAAAxD,EAAA,KAEaiC,QAAM,MACNsB,aAAW,WACXsB,cAAY,YACZL,aAAW,WACXD,kBAAgB,gBAEhBK,GADAI,SAAS,SACTJ,cAAc,eACdG,SAAO,OACP9B,oBAAkB,kBAiCzBoB,EAAgB,GAAAb,GAAAyB,KAAS,IAAK,IAAK,IAAK,OH+IxCC,IACA,SAASpF,EAAQC,EAASC,GAE/B,YA+BA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GI3MxF,QAASiF,GAAO1D,GACd,GAAM2D,MAAsBC,EAAAC,WAAU7D,GAChC8D,KAAqCC,EAAAC,YAAWL,GAChDM,KAAgCC,EAAAC,aAAYL,GAC5CM,KAAqCC,EAAAC,mBAAkBL,GACvDM,KAA6BC,EAAAC,mBAAkBL,GAC/CM,KAAqCC,EAAAC,mBAAkBL,GACvDM,KAA4CC,EAAAC,gBAAeL,EACjE,OAAOG,GAGM,QAAS3D,KAAuC,GAA9BlB,GAA8BC,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,GAAA+E,EAAArG,QAAR0B,EAAQJ,UAAA,EAC7D,QAAQI,EAAOC,MACb,IAAAC,GAAAuC,cACE,MAAO9C,GAAMiF,OAAO,WAAY5E,EAAO2C,QACzC,KAAAzC,GAAA4C,YACE,MAAOnD,GAAMiF,OAAO,WAAY5E,EAAO2C,QACzC,KAAAzC,GAAAwC,SACE,GAAmB,MAAf1C,EAAO2C,IAAa,SAAOkC,EAAAC,YAAWnF,EAC1C,IAAmB,MAAfK,EAAO2C,IAAa,SAAOoC,EAAAC,cAAarF,EAAOA,EAAMsF,IAAI,QAC7D,MACF,KAAA/E,GAAAiB,gBACE,KACF,KAAAjB,GAAAuB,SACE,GAAMyD,GAAevF,EAAMwF,OAAO,QAAS,UAAY,EACjDC,EAAezF,EAAMiF,OAAO,QAAS,SAAUM,GAC/CG,EAAarF,EAAOkB,KAAKoE,IAAI,KAAMJ,EACzC,OAAOE,GAAaR,OAAO,QAAS,QAClCQ,EAAaD,OAAO,QAAS,SAASI,KAAKF,GAC/C,KAAAnF,GAAA+C,KACE,MAAOI,GAAO1D,GAElB,MAAOA,GJ8IRS,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EAAQK,QItKeuC,CA5BxB,IAAAX,GAAAhC,EAAA,KAKAsH,EAAAtH,EAAA,KJmMKyG,EAAiBxG,EAAuBqH,GIjM7CxB,EAAA9F,EAAA,KACAwF,EAAAxF,EAAA,KACA2F,EAAA3F,EAAA,KACAuG,EAAAvG,EAAA,KACAqF,EAAArF,EAAA,KACA2G,EAAA3G,EAAA,KACA6G,EAAA7G,EAAA,KACAiG,EAAAjG,EAAA,KACAoG,EAAApG,EAAA,MJsPMuH,IACA,SAASzH,EAAQC,EAASC,GAE/B,YAEAkC,QAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EAAQyH,MAAQ5F,MK7QjB,IAAA4B,GAAAxD,EAAA,KAGIyH,GADSD,QAAQ,GACTE,OAAOC,YACfC,EAASF,OAAOG,YAEdC,EAAe,GAAAtE,GAAAC,KACnBsE,OAAQ,GAAAvE,GAAAC,KACNuE,YAAa,IACbC,OAAQR,EAAQG,EAChBM,KAAM,EACNC,IAAK,IACLC,SAAU,GAAA5E,GAAAC,KACRJ,EAAG,EACHC,EAAG,EACH+E,EAAG,KAELlF,SAAU,GAAAK,GAAAC,KACRJ,EAAG,EACHC,EAAG,EACH+E,EAAG,IAELC,OAAQ,GAAA9E,GAAAC,KACNJ,EAAG,EACHC,EAAG,EACH+E,EAAG,MAGPrF,KAAM,GAAAQ,GAAAC,KACJ8E,GAAI,EACJ7E,OAAQ,GACRC,MAAO,GACPR,SAAU,GAAAK,GAAAC,KACRJ,QACAC,EAAG,KACH+E,EAAG,IAELD,SAAU,GAAA5E,GAAAC,KACRJ,EAAG,EACHC,EAAG,EACH+E,EAAG,IAELG,SAAU,GAAAhF,GAAAC,KACRgF,MAAO,IACPC,QAAS,gCAGbC,MAAO,GAAAnF,GAAAC,KACLrB,MAAO,EACPwG,KAAM,GAAApF,GAAAqF,MAAU,GAAArF,GAAAC,KACd8E,GAAI,EACJ7E,OAAQ,GACRC,MAAO,GACPR,SAAU,GACVS,UAAW,IACXC,UAAW,MACT,GAAAL,GAAAC,KACF8E,GAAI,EACJ7E,OAAQ,GACRC,MAAO,GACPR,SAAU,EACVS,UAAW,IACXC,UAAW,MACT,GAAAL,GAAAC,KACF8E,GAAI,EACJ7E,OAAQ,GACRC,MAAO,GACPR,SAAU,IACVS,UAAW,IACXC,UAAW,UAGfiF,SAAU,GAAAtF,GAAAC,IACVsF,YAAa,GAAAvF,GAAAC,KACXrB,MAAO,EACPwG,KAAM,GAAApF,GAAAqF,OAERG,WAAY,GAAAxF,GAAAqF,KACZI,QAAS,GAAAzF,GAAAqF,MAAU,GAAArF,GAAAC,KACjBC,OAAQ,IACRC,MAAO,IACPC,UAAW,IACXC,UAAW,IACX9B,KAAM,OACNmH,KAAM,WACNX,GAAI,MAENY,SAAU,GAAA3F,GAAAC,KACRrB,MAAO,EACPwG,KAAM,GAAApF,GAAAqF,MAAU,GAAArF,GAAAC,KACd2F,KAAM,mFACNb,GAAI,EACJc,MAAO,UAGXA,MAAO,EACPC,IAAK,ILkRNvJ,GAAQK,QK/QM0H,GLmRTyB,IACA,SAASzJ,EAAQC,EAASC,GAE/B,YMvXD,SAASwJ,GAAyBC,EAAYC,EAAOX,GACnD,GAAMnF,GAAY6F,EAAW1C,IAAI,aAC3BlD,EAAY4F,EAAW1C,IAAI,YAEjC,SAAInD,EAAY,KAAQA,OAAmBC,EAAY,KAAQA,EAAY,GAMtE,QAASkC,GAAkBtE,GAChC,GAAMsH,GAActH,EAAMwF,OAAO,cAAe,SAC1C0C,EAAmCZ,EAAYa,OAAOJ,GACtDK,EAAkCpI,EAAMiF,OAAO,cAAe,QAASiD,GAEvEG,EAAqCH,EACxCI,OAAO,SAAC7C,EAAcuC,EAAYC,GAAU,GAAAM,MACZC,EAAAC,yBAC7BT,EAAW1C,IAAI,SACf0C,EAAW1C,IAAI,YACf0C,EAAW1C,IAAI,aACf0C,EAAW1C,IAAI,cAJVnD,EADoCoG,EACpCpG,UAAWC,EADyBmG,EACzBnG,UAMdsG,EAAoBV,EAAWrC,IAAI,YAAaxD,GAAWwD,IAAI,YAAavD,EAChF,OAAOqD,GAAaR,OAAO,cAAe,OAAQgD,GAAQS,IACzDN,EAEL,OAAOC,GN8VR5H,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EMlXegG,mBAZhB,IAAAkE,GAAAjK,EAAA,MN+ZMoK,IACA,SAAStK,EAAQC,EAASC,GAE/B,YOhaM,SAASkK,GAAwBG,EAAUlH,EAAUiF,GAE1D,GAAMkC,GAAkBnH,EAASG,EAG1BD,EAAW+E,EAAX/E,EAAGC,EAAQ8E,EAAR9E,EAAG+E,EAAKD,EAALC,EACPkC,EAAYjD,EAAAE,MAAQ6C,EAAWrG,KAAKwG,IAAIF,GACxCG,EAAYnD,EAAAE,MAAQ6C,EAAWrG,KAAK0G,IAAIJ,GACxCK,EAAY,CAElB,QACEtH,EAAGA,EAAIoH,EACPnH,EAAGA,EAAIiH,EACPlC,EAAGA,EAAIsC,GAIJ,QAASC,GAAsB5H,EAAM6H,GAAO,GAAAb,GAK/BE,EAChBW,GACExH,EAAGL,EAAKiE,OAAO,WAAY,MAC3B3D,EAAGN,EAAKiE,OAAO,WAAY,MAC3BoB,EAAGrF,EAAKiE,OAAO,WAAY,QAE3B5D,EAAGL,EAAKiE,OAAO,WAAY,MAC3B3D,EAAGN,EAAKiE,OAAO,WAAY,MAC3BoB,EAAGrF,EAAKiE,OAAO,WAAY,QARxB5D,EAL0C2G,EAK1C3G,EAAGC,EALuC0G,EAKvC1G,EAAG+E,EALoC2B,EAKpC3B,EAUTnB,EAAelE,EAChB0D,OAAO,WAAY,KAAMrD,GACzBqD,OAAO,WAAY,KAAMpD,GACzBoD,OAAO,WAAY,KAAM2B,EAE5B,OAAOnB,GP6XRhF,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EOraemK,0BPsafnK,EOrZe6K,uBAnBhB,IAAAtD,GAAAtH,EAAA,MPydM8K,IACA,SAAShL,EAAQC,EAASC,GAE/B,YQndD,SAAS+K,GAAqBjC,GAC5B,GAAMkC,GAAgB,GAChBC,IAyBN,OAxBInC,GAASxE,IAAI,MACf2G,EAAc5D,MACZtF,KAAMmJ,EACNL,MAAO,IAGP/B,EAASxE,IAAI,MACf2G,EAAc5D,MACZtF,KAAMoJ,EACNN,WAGA/B,EAASxE,IAAI,MACf2G,EAAc5D,MACZtF,KAAMqJ,EACNC,OAAQL,IAGRlC,EAASxE,IAAI,MACf2G,EAAc5D,MACZtF,KAAMqJ,EACNC,QAASL,IAGN,GAAAxH,GAAAqF,KAASoC,GAGX,QAASxF,GAAWhE,GACzB,GAAMqH,GAAWrH,EAAMsF,IAAI,YACrBuE,EAAiBxC,EAASc,OAAO,SAACtH,EAAOmC,GAAR,MAAgBnC,KAGjD2I,EAAgBF,EAAqBO,EAC3C,OAAOL,GAAclB,OAAO,SAAC7C,EAAcpF,GACzC,OAAQA,EAAOC,MACb,IAAKqJ,GACH,MAAOlE,GAAaR,OAAO,OAAQ,WAAY,KAC7CQ,EAAaD,OAAO,OAAQ,WAAY,MAAQnF,EAAOuJ,OAC3D,KAAKH,GACL,IAAKC,GACH,MAAOjE,GAAaE,IAAI,UACtB6C,EAAAW,uBAAsB1D,EAAaH,IAAI,QAASjF,EAAO+I,UAE5DpJ,GRuaJS,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EAAQwL,YAAcxL,EAAQmL,aAAenL,EAAQoL,aAAepL,EAAQqL,UAAYxJ,OACxF7B,EQ3be0F,YAvChB,IAAAjC,GAAAxD,EAAA,KAEAiK,EAAAjK,EAAA,KAEaoL,cAAY,YACZD,iBAAe,eACfD,iBAAe,cACfK,eAAc,eRyhBrBC,IACA,SAAS1L,EAAQC,EAASC,GAE/B,YShhBM,SAAS4F,GAAYnE,GAC1B,MAAOA,GTihBRS,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,ESrhBe6F,cAnBhB5F,EAAA,KAEAA,EAAA,MTgkBMyL,IACA,SAAS3L,EAAQC,GAEtB,YUrkBM,SAASyG,GAAe/E,GAE7B,GAAM0H,GAAW1H,EAAMwF,OAAO,WAAY,SACpCyE,EAAkBvC,EAErBS,OAAO,SAAC+B,GACP,GAAMtC,GAAQsC,EAAQ5E,IAAI,QAC1B,SAASsC,EAAQ,EAAI,KAEtBuC,IAAI,SAACD,GACJ,GAAMtC,GAAQsC,EAAQ5E,IAAI,QAC1B,OAAIsC,GACKsC,EAAQvE,IAAI,QAASiC,EAAQ,GAE/BsC,GAEX,OAAOlK,GAAMiF,OAAO,WAAY,QAASgF,GVujB1CxJ,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EU1kBeyG,kBV+lBVqF,IACA,SAAS/L,EAAQC,GAEtB,YW5lBM,SAASuF,GAAU7D,GACxB,GAAM4H,GAAQ5H,EAAMsF,IAAI,SAClB+E,EAAiB9H,KAAK+H,UAAUC,OAAOC,WACvCC,EAAYJ,EAAiBK,EAC/BjF,EAAezF,CACfyK,IAAaE,IAEfD,EAAwBL,EACxB5E,EAAezF,EAAM2F,IAAI,QAAS,GAEpC,IAAMiF,GAASrI,KAAK+H,MAAM,IAAO1C,EAAQ6C,EACzC,OAAOhF,GACJE,IAAI,QAASF,EAAaH,IAAI,SAAW,GACzCK,IAAI,MAAOiF,GXilBfnK,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EWjmBeuF,WANhB,IAAI6G,GAAwBnI,KAAK+H,UAAUC,OAAOC,WAE5CG,EAA6B,KX4nB7BE,IACA,SAASxM,EAAQC,EAASC,GAE/B,YY/nBM,SAAS4G,GAAWnF,GACzB,GAAMuB,GAAOvB,EAAMsF,IAAI,QACjB5D,EAAWH,EAAK+D,IAAI,YACpBnD,EAAYZ,EAAK+D,IAAI,aACrBlD,EAAYb,EAAK+D,IAAI,aACrBC,EAAevF,EAAMwF,OAAO,cAAe,UAAY,EAEvDsF,EAAqB,GAAA/I,GAAAC,KACzBN,WAAUS,YAAWC,YACrBH,OAAQ,GACRC,MAAO,GACPkH,MAAO,GACPtC,GAAIvB,IAGAwF,EAAqB/K,EAAMwF,OAAO,cAAe,SACjDwF,EAAqBD,EAAmBnF,KAAKkF,GAC7CrF,EAAgBzF,EAAMiF,OAAO,cAAe,SAAUM,EAC5D,OAAOE,GAAaR,OAAO,cAAe,QAAS+F,GZ+mBpDvK,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EYpoBe6G,YAFhB,IAAApD,GAAAxD,EAAA,MZiqBM0M,IACA,SAAS5M,EAAQC,EAASC,GAE/B,YAiBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,Ga7qBjF,QAAS4G,GAAarF,EAAOuB,GAClC,GAAMiG,GAAUxH,EAAMsF,IAAI,WACpB4F,EAAgBC,EAA2B3D,EAASjG,EAC1D,KAAK2J,EACH,MAAOlL,EAET,IAAMoL,GAAepL,EAAMwF,OAAO,WAAY,UAC1C6F,EAAkBD,EAAe,EAC/BE,EAAaC,EAAWL,EAAe3J,EAAM8J,EACnD,IAAiC,OAA7BC,EAAWhG,IAAI,UAAoB,CACrC,GAAMkG,GAAexL,EAAMwF,OAAO,WAAY,QAC9C,IAAIiG,EAAYP,EAAe3J,EAAMmK,GAAgB,CACnD,GAAMC,GAAgBC,EAAeV,EAAe3J,EAAM6J,GACpDS,EAASF,EAAcrG,IAAI,WAC3BwG,EAA2BN,EAAaO,UAAU,SAAC7B,GACvD,MAA8B,uBAAvBA,EAAQ5E,IAAI,UAEf0G,EACJF,MACIN,EAAaS,OAAOH,GACpBN,CACN,UAAOU,EAAAvN,SAAWqB,EAAMiF,OAAO,WAAY,QAAS+G,GAA0BH,GAEhF,GAAMA,GAASP,EAAWhG,IAAI,WACxB6G,EAAcX,EAAaY,QAAQP,GACzC,OAAO7L,GAAMiF,OAAO,WAAY,SAAUoG,GACvCpG,OAAO,WAAY,QAASkH,GAEjC,MAAOnM,GAGT,QAAS4L,GAAeS,EAAQ9K,EAAM6J,GACpC,MAAO,IAAArJ,GAAAC,KACLsK,OAAQ,KACRpC,QAAS,GAAAnI,GAAAC,KACP2F,mBAAoB0E,EAAO/G,IAAI,QAC/BsC,MAAO,GACPd,GAAIsE,EAAe,MAKzB,QAASG,GAAWc,EAAQ9K,EAAM6J,GAChC,MAAImB,GAAcF,EAAQ9K,GACjB,GAAAQ,GAAAC,KACLsK,OAAQ,KACRpC,QAAS,GAAAnI,GAAAC,KACP2F,KAAM,sBACNC,MAAO,IACPd,GAAIsE,EAAe,MAIlB,GAAArJ,GAAAC,KACLsK,OAAQ,cACRpC,QAAS,GAAAnI,GAAAC,KACP2F,KAAM,sBACNb,GAAIsE,EAAe,MAKzB,QAASmB,GAAcF,EAAQ9K,GAC7B,SAGF,QAAS4J,GAA2B3D,EAASjG,GAC3C,GAAMiL,GAA2BhF,EAAQW,OAAO,SAACkE,GAAD,MAC9CZ,GAAYY,EAAQ9K,EAAMkL,KAItBvB,EAC6B,GAAjCsB,EAAyBE,KACrBF,EAAyBG,QACzBH,EAAyBlE,OAAO,SAACsE,EAAoBP,GACvD,MAAOO,IACNJ,EAAyBlH,IAAI,GAClC,OAAO4F,GAGT,QAASO,GAAYY,EAAQ9K,EAAMsL,GAEjC,GAAMC,GAAUT,EAAO/G,IAAI,aACrByH,EAAUV,EAAO/G,IAAI,aACrB0H,EAAeX,EAAO/G,IAAI,UAC1B2H,EAAcZ,EAAO/G,IAAI,SACzB4H,EAAQ3L,EAAK+D,IAAI,aACjB6H,EAAQ5L,EAAK+D,IAAI,aACjB8H,EAAa7L,EAAK+D,IAAI,UACtB+H,EAAY9L,EAAK+D,IAAI,SAErBgI,EAAeL,GAAeD,EAAeC,EAAc,EAAID,EAAe,EAC9EO,EAAaF,GAAaD,EAAaC,EAAY,EAAID,EAAa,EACpEI,GACJC,QAASC,IAAKX,EAAUO,EAAcK,KAAMb,EAAUQ,GACtDM,OAAQN,EAAeT,GAEnBgB,GACJJ,QAASC,IAAKP,EAAQI,EAAYI,KAAMT,EAAQK,GAChDK,OAAQL,EAEV,UAAOO,EAAAnP,SAAiB6O,EAAcK,GbwjBvCpN,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EajqBe+G,cARhB,IAAAtD,GAAAxD,EAAA,KAEAwP,EAAAxP,EAAA,Kb6qBKuP,EAAqBtP,EAAuBuP,Ga5qBjDC,EAAAzP,EAAA,KbgrBK2N,EAAe1N,EAAuBwP,Ga9qBrCtC,EAAgB,GAChBe,EAAgB,KbwxBhBwB,IACA,SAAS5P,EAAQC,GAEtB,YcjyBc,SAAS4P,GAAiBC,EAASC,GAEhD,GAAMC,GAAKF,EAAQV,OAAOC,IAAMU,EAAQX,OAAOC,IACzCY,EAAKH,EAAQV,OAAOE,KAAOS,EAAQX,OAAOE,KAE1CY,EAAQF,EAAKA,EAAOC,EAAKA,EACzBE,GAAgBL,EAAQP,OAASQ,EAAQR,SAAWO,EAAQP,OAASQ,EAAQR,OAMnF,OAAOW,IAAQC,EduxBhB/N,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EAAQK,QctyBeuP,GdwzBlBO,IACA,SAASpQ,EAAQC,EAASC,GAE/B,YezzBc,SAASmQ,GAAW1O,EAAOkK,GAAS,GAC1CvC,GAAeuC,EAAfvC,KAAMC,EAASsC,EAATtC,MACPF,EAAW1H,EAAMsF,IAAI,YACrB3E,EAAQ+G,EAASpC,IAAI,SACrB6B,EAAOO,EAASpC,IAAI,QACpBqJ,EAAiBxH,EAAKvB,KAAK,GAAA7D,GAAAC,KAC/B8E,GAAInG,EAAQ,EACZgH,OAAMC,UAER,OAAO5H,GAAMiF,OAAO,WAAY,QAAS0J,GACtC1J,OAAO,WAAY,SAAUtE,EAAQ,GfizBzCF,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EAAQK,Qe9zBe+P,CAFxB,IAAA3M,GAAAxD,EAAA,Mfo1BMqQ,IACA,SAASvQ,EAAQC,EAASC,GAE/B,YAaA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GgBh2BxF,QAASoQ,GAAYC,EAAMC,GACzB,GAAMC,GAAaF,EAAKxJ,IAAI,UACtB2J,EAAYH,EAAKxJ,IAAI,SACrB4J,EAAQJ,EAAKxJ,IAAI,aACjB6J,EAAQL,EAAKxJ,IAAI,aACjB8J,EAAaL,EAAKzJ,IAAI,UACtB+J,EAAYN,EAAKzJ,IAAI,SACrBgK,EAAQP,EAAKzJ,IAAI,aACjBiK,EAAQR,EAAKzJ,IAAI,aAGjBkK,EAAaP,GAAaD,EAAaC,EAAY,EAAID,EAAa,EACpEb,GACJV,QAASC,IAAKyB,EAAQK,EAAY7B,KAAMuB,EAAQM,GAChD5B,OAAQ4B,GAEJC,EAAaJ,GAAaD,EAAaC,EAAY,EAAID,EAAa,EACpEhB,GACJX,QAASC,IAAK6B,EAAQE,EAAY9B,KAAM2B,EAAQG,GAChD7B,OAAQ6B,EAIV,UAAO3B,EAAAnP,SAAiBwP,EAASC,GAG5B,QAAS3J,GAAkBzE,GAChC,GAAMsH,GAActH,EAAMwF,OAAO,cAAe,SAC1C0B,EAAQlH,EAAMwF,OAAO,QAAS,SAC9BjB,EAA6B+C,EAAYgB,OAAO,SAAC7C,EAAcuC,EAAY0H,GAC/E,GAAMC,GAA6BlK,EAAaH,IAAI,cAC9CsK,EAAkB1I,EACrBiB,OAAO,SAAC5G,GAAD,MACNsN,GAAY7G,EAAYzG,KACzB4I,IAAI,SAAC5I,GAIJ,MAAO,IAAAQ,GAAAC,KACLgG,aAAYzG,UAGlB,OAAOkE,GAAaE,IAAI,aAAciK,EAAgBxD,OAAOuD,KAC5D3P,EACH,OAAOuE,GhByyBR9D,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EgB9zBemG,mBA9BhB,IAAA1C,GAAAxD,EAAA,KAEAwP,EAAAxP,EAAA,KhBg2BKuP,EAAqBtP,EAAuBuP,IAoD3C8B,IACA,SAASxR,EAAQC,EAASC,GAE/B,YAaA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GiBl6BxF,QAASqR,GAAiB9P,EAAO+P,GAC/B,IAAKA,EAAW,MAAO/P,EACvB,IAAMgI,GAAa+H,EAAUzK,IAAI,cAC3B0K,EAAehI,EAAW1C,IAAI,MAC9B/D,EAAOwO,EAAUzK,IAAI,QACrB2K,EAAS1O,EAAK+D,IAAI,MAElBoK,EAAkB1P,EAAMwF,OAAO,cAAe,SAASuG,UAAU,SAAC/D,GACtE,MAAOA,GAAW1C,IAAI,OAAS0K,IAE3BE,EAAYlQ,EAAMwF,OAAO,QAAS,SAASuG,UAAU,SAACxK,GAC1D,MAAOA,GAAK+D,IAAI,OAAS2K,IAErBE,EAAyBnQ,EAAMoQ,UAAU,cAAe,OAAQV,IAChEW,EAAmBF,EAAuBC,UAAU,QAAS,OAAQF,GAC3E,OAAOG,GAGF,QAASzL,GAAkB5E,GAChC,GAAMuH,GAAavH,EAAMsF,IAAI,aAC7B,IAAIiC,EAAWmF,KAAO,EAAG,CACvB,GAAM4D,GAA8B/I,EAAWe,OAAO,SAAC7C,EAAcsK,GACnE,GAAM7F,IACJvC,KAAM,qBACNC,MAAO,KAEH2I,KAAmBrE,EAAAvN,SAAW8G,EAAcyE,EAElD,OAAO4F,GAAiBS,EAAkBR,IACzC/P,EACH,OAAOsQ,GAA4B3K,IAAI,aAAc,GAAA5D,GAAAqF,MAEvD,MAAOpH,GjBu3BRS,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EiBx4BesG,mBAtBhB,IAAA7C,GAAAxD,EAAA,KAEAyP,EAAAzP,EAAA,KjBk6BK2N,EAAe1N,EAAuBwP,IAyCrCwC,IACA,SAASnS,EAAQC,EAASC,GAE/B,YAaA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GkBl8BxF,QAASgS,GAASlP,GAChB,GAAMmP,GAAenP,EAAK+D,IAAI,YAC1BqL,EAAS,GAAAC,GAAAC,UACbF,GAAOG,KAAKJ,EAAapL,IAAI,WAAY,SAAUyL,EAAUC,GAE3D,GAAIC,GAAW,GAAAL,GAAAM,mBAAuBF,EAAU,GAChDG,GAAO,GAAAP,GAAAQ,KAASL,EAAUE,GAC1BE,EAAKnK,MAAMpF,EAAIuP,EAAKnK,MAAMnF,EAAIsP,EAAKnK,MAAMJ,EAAI8J,EAAapL,IAAI,SAC9D6L,EAAKE,YAAcN,EAAStD,SAC5B0D,EAAKxK,SAAS/E,EAAIL,EAAKiE,OAAO,WAAY,MAC1C2L,EAAKxK,SAAS9E,EAAIN,EAAKiE,OAAO,WAAY,MAC1C2L,EAAKxK,SAASC,EAAIrF,EAAKiE,OAAO,WAAY,MAC1C8L,EAAMlQ,IAAI+P,EAGV,IAAII,GAAM,GAAAX,GAAAY,cAAkBL,EAAKJ,UAC7BU,EAAM,GAAAb,GAAAc,mBAAuBC,MAAO,EAAUC,UAAW,IACzDC,EAAY,GAAAjB,GAAAkB,aAAiBP,EAAKE,EACtCN,GAAK/P,IAAIyQ,GAETE,MAIJ,QAASA,KACFZ,GAILA,EAAKzP,SAASiE,IAAI,KAAM,KAAM,GAGzB,QAASqM,GAAK1S,GACnB2S,EAAS3S,EACT4S,EAAe5S,EAAM6S,UAAU,cAI/Bb,EAAQ,GAAAV,GAAAwB,MACR3B,EAASwB,EAAOI,WAAWnR,SAASoE,IAAI,SACxCgN,EAAWL,EAAOI,WAAWnR,SAASoE,IAAI,WAC1CiN,IACAC,IAEA5S,SAAS6S,KAAKC,YAAYC,EAASC,YAMnCnT,IAGF,QAAS8S,KACP,GAAIM,GAAQ,GAAAjC,GAAAkC,aAAiB,SAC7BxB,GAAMlQ,IAAIyR,GAGZ,QAASP,GAAWS,GAClBzM,EAAS,GAAAsK,GAAAoC,kBACPD,EAAWzN,IAAI,eACfyN,EAAWzN,IAAI,UACfyN,EAAWzN,IAAI,QACfyN,EAAWzN,IAAI,QACjBgB,EAAO5E,SAASiE,IACdoN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,OAChCc,EAAOK,SAAShB,IACdoN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,OAChCc,EAAOO,OACL,GAAA+J,GAAAqC,QAAYF,EAAWvN,OAAO,SAAU,MACtCuN,EAAWvN,OAAO,SAAU,MAC5BuN,EAAWvN,OAAO,SAAU,QAGlC,QAASgN,KACPG,EAAW,GAAA/B,GAAAsC,eAAmBC,eAC9BR,EAASS,QAAQpN,EAAOG,GAG1B,QAAS1G,KACP4T,sBAAsB5T,GAEtBkT,EAASlT,OAAO6R,EAAOhL,GlBi2BxB7F,OAAOG,eAAetC,EAAS,cAC7BuC,WAEFvC,EkB15Be0T,MA3DhB,IAAApB,GAAArS,EAAA,KAcA+U,EAAA/U,EAAA,KAEI+S,MlB28BY9S,GAAuB8U,GkB38B5BhN,SAAQqM,SAGf3M,EAAQC,OAAOC,WACfC,EAASF,OAAOG,YAIhB8L,SAAcD,SAEdd,EAAO,MlBiiCLoC,IACA,SAASlV,EAAQC,EAASC,GAE/B,YA0BA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS+U,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAY1T,OAAO2T,OAAOF,GAAcA,EAAWC,WAAaE,aAAexT,MAAOoT,EAAUK,cAAmBC,YAAgBC,mBAA6BN,IAAYzT,OAAOgU,eAAiBhU,OAAOgU,eAAeR,EAAUC,GAAcD,EAASS,UAAYR,GmBz6Ble,QAASS,GAAWpT,EAAMqT,GACnBrT,IACLA,EAAKoF,SAAS/E,EAAIgT,EAAUpP,OAAO,WAAY,MAC/CjE,EAAKoF,SAAS9E,EAAI+S,EAAUpP,OAAO,WAAY,MAC/CjE,EAAKoF,SAASC,EAAIgO,EAAUpP,OAAO,WAAY,MAC/CjE,EAAKG,SAASE,EAAIgT,EAAUpP,OAAO,WAAY,MAC/CjE,EAAKG,SAASG,EAAI+S,EAAUpP,OAAO,WAAY,MAC/CjE,EAAKG,SAASkF,EAAIgO,EAAUpP,OAAO,WAAY,OnBo4BhD/E,OAAOG,eAAetC,EAAS,cAC7BuC,UAGF,IAAIgU,GAAe,WAAc,QAASC,GAAiBC,EAAQvV,GAAS,IAAK,GAAIwV,GAAI,EAAGA,EAAIxV,EAAMU,OAAQ8U,IAAK,CAAE,GAAIC,GAAazV,EAAMwV,EAAIC,GAAWX,WAAaW,EAAWX,eAAqBW,EAAWT,gBAAyB,SAAWS,KAAYA,EAAWV,aAAiB9T,OAAOG,eAAemU,EAAQE,EAAWjS,IAAKiS,IAAiB,MAAO,UAAUvB,EAAawB,EAAYC,GAAiJ,MAA9HD,IAAYJ,EAAiBpB,EAAYS,UAAWe,GAAiBC,GAAaL,EAAiBpB,EAAayB,GAAqBzB,MmBpkCjiB9U,EAAAL,EAAA,GnBwkCKM,EAAUL,EAAuBI,GmBvkCtCI,EAAAT,EAAA,KACAgC,EAAAhC,EAAA,KACAqS,EAAArS,EAAA,KAaA6W,EAAA7W,EAAA,KnBkkCK8W,EAAa7W,EAAuB4W,GmBhkCzCE,EAAA/W,EAAA,KnBokCKgX,EAAY/W,EAAuB8W,GmBlkClCE,EAAiB,GACnBxP,EAAQ,IACRG,EAAS,IAEPsP,EnB4kCc,SAAUC,GmB1kC5B,QAAAD,GAAYjW,GAAOgU,EAAAmC,KAAAF,EAAA,IAAAG,GAAAhC,EAAA+B,MAAAF,EAAAf,WAAAjU,OAAAoV,eAAAJ,IAAA3B,KAAA6B,KACXnW,GADW,OAGjBoW,GAAKE,cAAgB,KAErBF,EAAK5V,OACH+V,YAAa,GAGfH,EAAKI,cAAgBJ,EAAKK,eAAeC,KAApBN,GACrBA,EAAKO,UAAYP,EAAKQ,WAAWF,KAAhBN,GACjBA,EAAKS,QAAUT,EAAKU,SAASJ,KAAdN,GACfA,EAAKW,WAAaX,EAAKY,YAAYN,KAAjBN,GAZDA,EnBkwClB,MAvLA5B,GAAUyB,EAAcC,GAoBxBb,EAAaY,IACXzS,IAAK,SACLnC,MAAO,WmBllCD,GAAA4V,GAAAd,IACP,OACE9W,GAAAF,QAAAe,cAAA,OAAKgX,UAAU,OACb7X,EAAAF,QAAAe,cAAA,OAAKgX,UAAU,aACb7X,EAAAF,QAAAe,cAAA,OAAKgX,UAAU,WACb7X,EAAAF,QAAAe,cAAA,UAAQgX,UAAU,cAAcC,QAAS,iBACvCF,GAAKT,kBADP,aAKFnX,EAAAF,QAAAe,cAAA,OAAKoH,GAAG,oBAERjI,EAAAF,QAAAe,cAAA,OAAKgX,UAAU,cACb7X,EAAAF,QAAAe,cAAA,mBAAWiW,KAAKnW,MAAM0B,SAASoE,IAAI,QACnCzG,EAAAF,QAAAe,cAAA,WAAMiW,KAAKiB,yBnB4mClB5T,IAAK,kBACLnC,MAAO,WmBrmCR,MAAO8U,MAAKnW,MAAM0B,SACfsE,OAAO,WAAY,SACnB2E,IAAI,SAACD,EAASjC,GAAV,MACHpJ,GAAAF,QAAAe,cAAA6V,EAAA5W,SAASqE,IAAKkH,EAAQ5E,IAAI,MAAOuR,KAAM3M,SnBwmC1ClH,IAAK,iBACLnC,MAAO,WmBpmCR8U,KAAKnW,MAAMwW,mBnBwmCVhT,IAAK,aACLnC,MAAO,SmBtmCCiW,GACTnB,KAAKnW,MAAM2W,UAAUW,EAAM9T,QnBymC1BA,IAAK,WACLnC,MAAO,SmBvmCDiW,GACPnB,KAAKnW,MAAM6W,QAAQS,EAAM9T,QnB0mCxBA,IAAK,cACLnC,MAAO,WmBvmCR8U,KAAKnW,MAAM+W,aAGX5B,EAAWgB,KAAKoB,MAAOpB,KAAKnW,MAAM0B,SAASoE,IAAI,SAE/CqQ,KAAKqB,UAAUvX,OAAOkW,KAAKsB,OAAQtB,KAAKuB,SACxCvB,KAAKG,cAAgB7P,OAAOkR,WAAWxB,KAAKY,WAAYf,MnB2mCvDxS,IAAK,oBACLnC,MAAO,WmBzmCU,GAAAuW,GAAAzB,IAClB1P,QAAOoR,iBAAiB,UAAW1B,KAAKQ,WACxClQ,OAAOoR,iBAAiB,QAAS1B,KAAKU,SACtCV,KAAKG,cAAgB7P,OAAOkR,WAAWxB,KAAKY,WAAYf,EAHtC,IAKXtU,GAAYyU,KAAKnW,MAAjB0B,QAEPyU,MAAKsB,OAAS,GAAArG,GAAAwB,MACduD,KAAKqB,UAAYrB,KAAK2B,gBACtB3B,KAAKuB,QAAUvB,KAAK4B,YAAYrW,EAASoE,IAAI,WAC7CqQ,KAAK6B,QAAU7B,KAAK8B,YAAYvW,EAASoE,IAAI,WAC7CqQ,KAAK+B,UAAUxW,EAASoE,IAAI,SAASqS,KAAK,SAACC,GACzCR,EAAKL,MAAQa,IAEfhY,SAASC,eAAe,mBAAmB6S,YAAYiD,KAAKqB,UAAUpE,enB+mCrE5P,IAAK,uBACLnC,MAAO,WmB5mCRoF,OAAO4R,oBAAoB,UAAWlC,KAAKQ,WAC3ClQ,OAAO4R,oBAAoB,QAASlC,KAAKU,SACzCpQ,OAAO6R,aAAanC,KAAKG,eACzBH,KAAKG,cAAgB,QnBgnCpB9S,IAAK,YACLnC,MAAO,SmB9mCAU,GAAM,GAAAwW,GAAApC,KACRjF,EAAenP,EAAK+D,IAAI,YAE1BqL,EAAS,GAAAC,GAAAC,WACTmH,EAAU,GAAA3C,GAAA1W,QAAY,SAACsZ,EAASC,GAClCvH,EAAOG,KAAKJ,EAAapL,IAAI,WAAY,SAACyL,EAAUC,GAClDiH,GAASlH,WAAUC,iBAGvB,OAAOgH,GAAQL,KAAK,SAACQ,GAAa,GACzBpH,GAAuBoH,EAAvBpH,SAAUC,EAAamH,EAAbnH,UAEbC,EAAW,GAAAL,GAAAM,mBAAuBF,EAAU,IAC5CG,EAAO,GAAAP,GAAAQ,KAASL,EAAUE,EAC9BE,GAAKnK,MAAMpF,EAAIuP,EAAKnK,MAAMnF,EAAIsP,EAAKnK,MAAMJ,EAAI8J,EAAapL,IAAI,SAC9D6L,EAAKE,YAAcN,EAAStD,SAC5B0D,EAAKxK,SAAS/E,EAAIL,EAAKiE,OAAO,WAAY,MAC1C2L,EAAKxK,SAAS9E,EAAIN,EAAKiE,OAAO,WAAY,MAC1C2L,EAAKxK,SAASC,EAAIrF,EAAKiE,OAAO,WAAY,MAC1CuS,EAAKd,OAAO7V,IAAI+P,EAGhB,IAAII,GAAM,GAAAX,GAAAY,cAAkBL,EAAKJ,UAC7BU,EAAM,GAAAb,GAAAc,mBAAuBC,MAAO,EAAUC,UAAW,IACzDC,EAAY,GAAAjB,GAAAkB,aAAiBP,EAAKE,EAEtC,OADAN,GAAK/P,IAAIyQ,GACFV,OnBsnCRnO,IAAK,cACLnC,MAAO,SmBnnCEkS,GACV,GAAMzM,GAAS,GAAAsK,GAAAoC,kBACbD,EAAWzN,IAAI,eACfyN,EAAWzN,IAAI,UACfyN,EAAWzN,IAAI,QACfyN,EAAWzN,IAAI,OAajB,OAZAgB,GAAO5E,SAASiE,IACdoN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,OAChCc,EAAOK,SAAShB,IACdoN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,MAC9BuN,EAAWvN,OAAO,WAAY,OAChCc,EAAOO,OACL,GAAA+J,GAAAqC,QAAYF,EAAWvN,OAAO,SAAU,MACtCuN,EAAWvN,OAAO,SAAU,MAC5BuN,EAAWvN,OAAO,SAAU,QACzBc,KnBymCNtD,IAAK,gBACLnC,MAAO,WmBtmCR,GAAM8R,GAAW,GAAA/B,GAAAsC,eAAmBC,cAEpC,OADAR,GAASS,QAAQpN,EAAOG,GACjBwM,KnB0mCN3P,IAAK,cACLnC,MAAO,WmBvmCR,GAAIgS,GAAQ,GAAAjC,GAAAkC,aAAiB,SAE7B,OADA6C,MAAKsB,OAAO7V,IAAIyR,GACTA,MnB4mCD4C,GACP7W,EAAOwZ,cmB7lCV3C,GAAa4C,WACX1X,MAAO9B,EAAAF,QAAM2Z,UAAUC,OACvBrX,SAAUrC,EAAAF,QAAM2Z,UAAUE,OAI5B,IAAMC,GAAkB,SAACzY,GACvB,OACEW,MAAOX,EAAMD,KAAKY,MAClBO,SAAUlB,EAAMkB,WAIdwX,EAAqB,SAACC,GAC1B,OACE3C,cAAe,WACb2C,KAASpY,EAAAkB,aAEX0U,UAAW,SAACnT,GACV2V,KAASpY,EAAAkC,oBAAmBO,KAE9BqT,QAAS,SAACrT,GACR2V,KAASpY,EAAA0C,kBAAiBD,KAE5BuT,WAAY,WACVoC,KAASpY,EAAA8C,gBAKTuV,KAAM5Z,EAAA6Z,SACVJ,EACAC,GACAjD,EnB0mCDnX,GAAQK,QmBxmCMia,GnB4mCTE,IACA,SAASza,EAAQC,EAASC,GAE/B,YAYA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS+U,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAY1T,OAAO2T,OAAOF,GAAcA,EAAWC,WAAaE,aAAexT,MAAOoT,EAAUK,cAAmBC,YAAgBC,mBAA6BN,IAAYzT,OAAOgU,eAAiBhU,OAAOgU,eAAeR,EAAUC,GAAcD,EAASS,UAAYR,GAhBjezT,OAAOG,eAAetC,EAAS,cAC7BuC,UAGF,IAAIgU,GAAe,WAAc,QAASC,GAAiBC,EAAQvV,GAAS,IAAK,GAAIwV,GAAI,EAAGA,EAAIxV,EAAMU,OAAQ8U,IAAK,CAAE,GAAIC,GAAazV,EAAMwV,EAAIC,GAAWX,WAAaW,EAAWX,eAAqBW,EAAWT,gBAAyB,SAAWS,KAAYA,EAAWV,aAAiB9T,OAAOG,eAAemU,EAAQE,EAAWjS,IAAKiS,IAAiB,MAAO,UAAUvB,EAAawB,EAAYC,GAAiJ,MAA9HD,IAAYJ,EAAiBpB,EAAYS,UAAWe,GAAiBC,GAAaL,EAAiBpB,EAAayB,GAAqBzB,MoBx1CjiB9U,EAAAL,EAAA,GpB41CKM,EAAUL,EAAuBI,GoB11ChCma,EpBo2CS,SAAUC,GAGtB,QAASD,KAGP,MAFAvF,GAAgBmC,KAAMoD,GAEfnF,EAA2B+B,MAAOoD,EAAQrE,WAAajU,OAAOoV,eAAekD,IAAUE,MAAMtD,KAAM1V,YAe5G,MApBA+T,GAAU+E,EAASC,GAQnBnE,EAAakE,IACX/V,IAAK,SACLnC,MAAO,WoB72CR,GAAMqY,GAAcvD,KAAKnW,MAAMqX,KAAKvR,IAAI,OACxC,OACEzG,GAAAF,QAAAe,cAAA,OAAKgX,UAAU,WAAWwC,OpBq3CtBH,GACPna,EAAOua,UAET7a,GAAQK,QoBl3CMoa,GpBs3CTK,IACA,SAAS/a,EAAQC,EAASC,GqBh4ChC,GAAA8a,GAAA9a,EAAA,IACA,iBAAA8a,SAAAhb,EAAAyI,GAAAuS,EAAA,MAEA9a,EAAA,KAAA8a,MACAA,EAAAC,SAAAjb,EAAAC,QAAA+a,EAAAC,SrBs5CMC,IACA,SAASlb,EAAQC,EAASC,GsB95ChCD,EAAAD,EAAAC,QAAAC,EAAA,OAKAD,EAAAsH,MAAAvH,EAAAyI,GAAA,sYAA6Z,MtBu6CvZ0S,IACA,SAASnb,EAAQC,GAEtB,YuB16CDD,GAAOC,QAAU,WAChB,GAAI6I,KA0CJ,OAvCAA,GAAKsS,SAAW,WAEf,IAAI,GADAC,MACI1E,EAAI,EAAGA,EAAIW,KAAKzV,OAAQ8U,IAAK,CACpC,GAAI2E,GAAOhE,KAAKX,EACb2E,GAAK,GACPD,EAAO9T,KAAK,UAAY+T,EAAK,GAAK,IAAMA,EAAK,GAAK,KAElDD,EAAO9T,KAAK+T,EAAK,IAGnB,MAAOD,GAAOE,KAAK,KAIpBzS,EAAK6N,EAAI,SAAS6E,EAASC,GACJ,gBAAZD,KACTA,IAAY,KAAMA,EAAS,KAE5B,KAAI,GADAE,MACI/E,EAAI,EAAGA,EAAIW,KAAKzV,OAAQ8U,IAAK,CACpC,GAAIlO,GAAK6O,KAAKX,GAAG,EACA,iBAAPlO,KACTiT,EAAuBjT,OAEzB,IAAIkO,EAAI,EAAGA,EAAI6E,EAAQ3Z,OAAQ8U,IAAK,CACnC,GAAI2E,GAAOE,EAAQ7E,EAKG,iBAAZ2E,GAAK,IAAoBI,EAAuBJ,EAAK,MAC3DG,IAAeH,EAAK,GACtBA,EAAK,GAAKG,EACDA,IACTH,EAAK,GAAK,IAAMA,EAAK,GAAK,UAAYG,EAAa,KAEpD3S,EAAKvB,KAAK+T,MAINxS,IvBo7CF6S,IACA,SAAS3b,EAAQC,EAASC,GwBx6ChC,QAAA0b,GAAAC,EAAAC,GACA,OAAAnF,GAAA,EAAeA,EAAAkF,EAAAha,OAAmB8U,IAAA,CAClC,GAAA2E,GAAAO,EAAAlF,GACAoF,EAAAC,EAAAV,EAAA7S,GACA,IAAAsT,EAAA,CACAA,EAAAE,MACA,QAAAC,GAAA,EAAiBA,EAAAH,EAAAI,MAAAta,OAA2Bqa,IAC5CH,EAAAI,MAAAD,GAAAZ,EAAAa,MAAAD,GAEA,MAAQA,EAAAZ,EAAAa,MAAAta,OAAuBqa,IAC/BH,EAAAI,MAAA5U,KAAA6U,EAAAd,EAAAa,MAAAD,GAAAJ,QAEG,CAEH,OADAK,MACAD,EAAA,EAAiBA,EAAAZ,EAAAa,MAAAta,OAAuBqa,IACxCC,EAAA5U,KAAA6U,EAAAd,EAAAa,MAAAD,GAAAJ,GAEAE,GAAAV,EAAA7S,KAA2BA,GAAA6S,EAAA7S,GAAAwT,KAAA,EAAAE,WAK3B,QAAAE,GAAAvT,GAGA,OAFA+S,MACAS,KACA3F,EAAA,EAAeA,EAAA7N,EAAAjH,OAAiB8U,IAAA,CAChC,GAAA2E,GAAAxS,EAAA6N,GACAlO,EAAA6S,EAAA,GACAiB,EAAAjB,EAAA,GACAkB,EAAAlB,EAAA,GACAmB,EAAAnB,EAAA,GACAoB,GAAcH,MAAAC,QAAAC,YACdH,GAAA7T,GAGA6T,EAAA7T,GAAA0T,MAAA5U,KAAAmV,GAFAb,EAAAtU,KAAA+U,EAAA7T,IAAgCA,KAAA0T,OAAAO,KAIhC,MAAAb,GAGA,QAAAc,GAAAb,EAAAc,GACA,GAAAC,GAAAC,IACAC,EAAAC,IAAAnb,OAAA,EACA,YAAAia,EAAAmB,SACAF,EAEGA,EAAAG,YACHL,EAAAM,aAAAP,EAAAG,EAAAG,aAEAL,EAAAxI,YAAAuI,GAJAC,EAAAM,aAAAP,EAAAC,EAAAO,YAMAJ,EAAAzV,KAAAqV,OACE,eAAAd,EAAAmB,SAGF,SAAAI,OAAA,qEAFAR,GAAAxI,YAAAuI,IAMA,QAAAU,GAAAV,GACAA,EAAAW,WAAAC,YAAAZ,EACA,IAAAa,GAAAT,EAAAU,QAAAd,EACAa,IAAA,GACAT,EAAAW,OAAAF,EAAA,GAIA,QAAAG,GAAA9B,GACA,GAAAc,GAAArb,SAAAF,cAAA,QAGA,OAFAub,GAAA3a,KAAA,WACA0a,EAAAb,EAAAc,GACAA,EAGA,QAAAiB,GAAA/B,GACA,GAAAgC,GAAAvc,SAAAF,cAAA,OAGA,OAFAyc,GAAAC,IAAA,aACApB,EAAAb,EAAAgC,GACAA,EAGA,QAAA1B,GAAAhc,EAAA0b,GACA,GAAAc,GAAAoB,EAAAC,CAEA,IAAAnC,EAAAoC,UAAA,CACA,GAAAC,GAAAC,GACAxB,GAAAyB,MAAAT,EAAA9B,IACAkC,EAAAM,EAAAzG,KAAA,KAAA+E,EAAAuB,MACAF,EAAAK,EAAAzG,KAAA,KAAA+E,EAAAuB,UACE/d,GAAAqc,WACF,kBAAA8B,MACA,kBAAAA,KAAAC,iBACA,kBAAAD,KAAAE,iBACA,kBAAAC,OACA,kBAAAC,OACA/B,EAAAiB,EAAA/B,GACAkC,EAAAY,EAAA/G,KAAA,KAAA+E,GACAqB,EAAA,WACAX,EAAAV,GACAA,EAAAiC,MACAN,IAAAE,gBAAA7B,EAAAiC,SAGAjC,EAAAgB,EAAA9B,GACAkC,EAAAc,EAAAjH,KAAA,KAAA+E,GACAqB,EAAA,WACAX,EAAAV,IAMA,OAFAoB,GAAA5d,GAEA,SAAA2e,GACA,GAAAA,EAAA,CACA,GAAAA,EAAAxC,MAAAnc,EAAAmc,KAAAwC,EAAAvC,QAAApc,EAAAoc,OAAAuC,EAAAtC,YAAArc,EAAAqc,UACA,MACAuB,GAAA5d,EAAA2e,OAEAd,MAcA,QAAAK,GAAA1B,EAAAhT,EAAAqU,EAAA7d,GACA,GAAAmc,GAAA0B,EAAA,GAAA7d,EAAAmc,GAEA,IAAAK,EAAAoC,WACApC,EAAAoC,WAAAC,QAAAC,EAAAtV,EAAA2S,OACE,CACF,GAAA4C,GAAA5d,SAAA6d,eAAA7C,GACA8C,EAAAzC,EAAAyC,UACAA,GAAAzV,IAAAgT,EAAAY,YAAA6B,EAAAzV,IACAyV,EAAAxd,OACA+a,EAAAO,aAAAgC,EAAAE,EAAAzV,IAEAgT,EAAAvI,YAAA8K,IAKA,QAAAL,GAAAlC,EAAAxc,GACA,GAAAmc,GAAAnc,EAAAmc,IACAC,EAAApc,EAAAoc,KAMA,IAJAA,GACAI,EAAA0C,aAAA,QAAA9C,GAGAI,EAAAoC,WACApC,EAAAoC,WAAAC,QAAA1C,MACE,CACF,KAAAK,EAAAQ,YACAR,EAAAY,YAAAZ,EAAAQ,WAEAR,GAAAvI,YAAA9S,SAAA6d,eAAA7C,KAIA,QAAAqC,GAAAd,EAAA1d,GACA,GAAAmc,GAAAnc,EAAAmc,IACAE,EAAArc,EAAAqc,SAEAA,KAEAF,GAAA,uDAAuDoC,KAAAY,SAAAC,mBAAAC,KAAAC,UAAAjD,MAAA,MAGvD,IAAAkD,GAAA,GAAAjB,OAAAnC,IAA6Bta,KAAA,aAE7B2d,EAAA9B,EAAAe,IAEAf,GAAAe,KAAAN,IAAAC,gBAAAmB,GAEAC,GACArB,IAAAE,gBAAAmB,GAhPA,GAAA5D,MACA6D,EAAA,SAAAC,GACA,GAAAC,EACA,mBAEA,MADA,mBAAAA,OAAAD,EAAAlF,MAAAtD,KAAA1V,YACAme,IAGAC,EAAAH,EAAA,WACA,qBAAAI,KAAArY,OAAAsY,UAAAC,UAAAC,iBAEAtD,EAAA+C,EAAA,WACA,MAAAte,UAAAsb,MAAAtb,SAAA8e,qBAAA,aAEAhC,EAAA,KACAD,EAAA,EACApB,IAEAhd,GAAAC,QAAA,SAAA6I,EAAAgT,GAKAA,QAGA,mBAAAA,GAAAoC,YAAApC,EAAAoC,UAAA8B,KAGA,mBAAAlE,GAAAmB,WAAAnB,EAAAmB,SAAA,SAEA,IAAApB,GAAAQ,EAAAvT,EAGA,OAFA8S,GAAAC,EAAAC,GAEA,SAAAwE,GAEA,OADAC,MACA5J,EAAA,EAAgBA,EAAAkF,EAAAha,OAAmB8U,IAAA,CACnC,GAAA2E,GAAAO,EAAAlF,GACAoF,EAAAC,EAAAV,EAAA7S,GACAsT,GAAAE,OACAsE,EAAAhZ,KAAAwU,GAEA,GAAAuE,EAAA,CACA,GAAAhE,GAAAD,EAAAiE,EACA1E,GAAAU,EAAAR,GAEA,OAAAnF,GAAA,EAAgBA,EAAA4J,EAAA1e,OAAsB8U,IAAA,CACtC,GAAAoF,GAAAwE,EAAA5J,EACA,QAAAoF,EAAAE,KAAA,CACA,OAAAC,GAAA,EAAkBA,EAAAH,EAAAI,MAAAta,OAA2Bqa,IAC7CH,EAAAI,MAAAD,WACAF,GAAAD,EAAAtT,OAiIA,IAAAyW,GAAA,WACA,GAAAsB,KAEA,iBAAA5W,EAAA6W,GAEA,MADAD,GAAA5W,GAAA6W,EACAD,EAAA1W,OAAA4W,SAAAnF,KAAA","file":"app.6ceae429de7f5095eafc.js","sourcesContent":["webpackJsonp([0,2],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(28);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _reactRedux = __webpack_require__(170);\n\t\n\tvar _redux = __webpack_require__(177);\n\t\n\tvar _reducers = __webpack_require__(200);\n\t\n\tvar _reducers2 = _interopRequireDefault(_reducers);\n\t\n\tvar _canvas = __webpack_require__(217);\n\t\n\tvar _app = __webpack_require__(220);\n\t\n\tvar _app2 = _interopRequireDefault(_app);\n\t\n\t__webpack_require__(225);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar store = (0, _redux.createStore)(_reducers2.default);\n\t\n\tvar props = {};\n\t\n\t_reactDom2.default.render(_react2.default.createElement(\n\t  _reactRedux.Provider,\n\t  { store: store },\n\t  _react2.default.createElement(_app2.default, props)\n\t), document.getElementById('root'));\n\n/***/ },\n\n/***/ 200:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _redux = __webpack_require__(177);\n\t\n\tvar _actions = __webpack_require__(201);\n\t\n\tvar _gameLoop = __webpack_require__(203);\n\t\n\tvar _gameLoop2 = _interopRequireDefault(_gameLoop);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar baseInitialState = {\n\t  count: 0\n\t};\n\t\n\tfunction base() {\n\t  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : baseInitialState;\n\t  var action = arguments[1];\n\t\n\t  switch (action.type) {\n\t    case _actions.ADD:\n\t      return Object.assign({}, state, {\n\t        count: state.count + 1\n\t      });\n\t    default:\n\t      return state;\n\t  }\n\t}\n\t\n\tvar spaceApp = (0, _redux.combineReducers)({\n\t  base: base,\n\t  gameLoop: _gameLoop2.default\n\t});\n\t\n\texports.default = spaceApp;\n\n/***/ },\n\n/***/ 201:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.ATTEMPT_TO_LAND = exports.TICK = exports.MOVE_KEY_UP = exports.KEY_UP = exports.MOVE_KEY_DOWN = exports.KEY_DOWN = exports.UNHANDLED = exports.ADD_SHIP = exports.ADD = undefined;\n\texports.add = add;\n\texports.attemptToLandOnPlanet = attemptToLandOnPlanet;\n\texports.addShip = addShip;\n\texports.handleInputKeyDown = handleInputKeyDown;\n\texports.handleInputKeyUp = handleInputKeyUp;\n\texports.loopTick = loopTick;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tvar ADD = exports.ADD = 'ADD';\n\tvar ADD_SHIP = exports.ADD_SHIP = 'ADD_SHIP';\n\tvar UNHANDLED = exports.UNHANDLED = 'UNHANDLED';\n\tvar KEY_DOWN = exports.KEY_DOWN = 'KEY_DOWN';\n\tvar MOVE_KEY_DOWN = exports.MOVE_KEY_DOWN = 'MOVE_KEY_DOWN';\n\tvar KEY_UP = exports.KEY_UP = 'KEY_UP';\n\tvar MOVE_KEY_UP = exports.MOVE_KEY_UP = 'MOVE_KEY_UP';\n\tvar TICK = exports.TICK = 'TICK';\n\tvar ATTEMPT_TO_LAND = exports.ATTEMPT_TO_LAND = 'ATTEMPT_TO_LAND';\n\t\n\tfunction add(num) {\n\t  return { type: ADD, num: num };\n\t}\n\t\n\tfunction attemptToLandOnPlanet(ship) {\n\t  return {\n\t    type: ATTEMPT_TO_LAND,\n\t    ship: ship\n\t  };\n\t}\n\t\n\tfunction addShip() {\n\t  var rotation = getRandomArbitrary(0, 360);\n\t  var x = getRandomArbitrary(10, 800);\n\t  var y = getRandomArbitrary(100, 800);\n\t  return {\n\t    type: ADD_SHIP,\n\t    ship: new _immutable.Map({\n\t      height: 40,\n\t      width: 40,\n\t      rotation: rotation,\n\t      positionX: x,\n\t      positionY: y\n\t    })\n\t  };\n\t}\n\t\n\tfunction getRandomArbitrary(min, max) {\n\t  return Math.random() * (max - min) + min;\n\t}\n\t\n\tvar MOVEMENT_KEYS = new _immutable.Set(['w', 'a', 's', 'd']);\n\t\n\tfunction handleInputKeyDown(keyDown) {\n\t  var actionType = void 0;\n\t  if (MOVEMENT_KEYS.has(keyDown)) {\n\t    actionType = MOVE_KEY_DOWN;\n\t  } else {\n\t    actionType = KEY_DOWN;\n\t  }\n\t  return {\n\t    type: actionType,\n\t    key: keyDown\n\t  };\n\t}\n\t\n\tfunction handleInputKeyUp(keyUp) {\n\t  var actionType = void 0;\n\t  if (MOVEMENT_KEYS.has(keyUp)) {\n\t    actionType = MOVE_KEY_UP;\n\t  } else {\n\t    actionType = UNHANDLED;\n\t  }\n\t  return {\n\t    type: actionType,\n\t    key: keyUp\n\t  };\n\t}\n\t\n\tfunction loopTick() {\n\t  return {\n\t    type: TICK\n\t  };\n\t}\n\n/***/ },\n\n/***/ 203:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = gameLoop;\n\t\n\tvar _actions = __webpack_require__(201);\n\t\n\tvar _initialState = __webpack_require__(204);\n\t\n\tvar _initialState2 = _interopRequireDefault(_initialState);\n\t\n\tvar _onTickProjectiles = __webpack_require__(205);\n\t\n\tvar _onTickShip = __webpack_require__(207);\n\t\n\tvar _onTickShips = __webpack_require__(208);\n\t\n\tvar _onTickMessages = __webpack_require__(209);\n\t\n\tvar _onTickFPS = __webpack_require__(210);\n\t\n\tvar _fireWeapon = __webpack_require__(211);\n\t\n\tvar _landOnPlanet = __webpack_require__(212);\n\t\n\tvar _collisionDetector = __webpack_require__(215);\n\t\n\tvar _collisionResolver = __webpack_require__(216);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction onTick(state) {\n\t  var updatedStateWithFPS = (0, _onTickFPS.onTickFPS)(state);\n\t  var updatedStateWithPlayerShipMovement = (0, _onTickShip.onTickShip)(updatedStateWithFPS);\n\t  var updatedStateWithShipsMovement = (0, _onTickShips.onTickShips)(updatedStateWithPlayerShipMovement);\n\t  var updatedStateWithProjectileMovement = (0, _onTickProjectiles.onTickProjectiles)(updatedStateWithShipsMovement);\n\t  var updatedStateWithCollisions = (0, _collisionDetector.collisionDetector)(updatedStateWithProjectileMovement);\n\t  var updatedStateWithCollisionsResolved = (0, _collisionResolver.collisionResolver)(updatedStateWithCollisions);\n\t  var updatedStateWithCollisionsMessagesUpdated = (0, _onTickMessages.onTickMessages)(updatedStateWithCollisionsResolved);\n\t  return updatedStateWithCollisionsMessagesUpdated;\n\t}\n\t\n\tfunction gameLoop() {\n\t  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _initialState2.default;\n\t  var action = arguments[1];\n\t\n\t  switch (action.type) {\n\t    case _actions.MOVE_KEY_DOWN:\n\t      return state.setIn(['keysDown', action.key], true);\n\t    case _actions.MOVE_KEY_UP:\n\t      return state.setIn(['keysDown', action.key], false);\n\t    case _actions.KEY_DOWN:\n\t      if (action.key === ' ') return (0, _fireWeapon.fireWeapon)(state);\n\t      if (action.key === 'l') return (0, _landOnPlanet.landOnPlanet)(state, state.get('ship'));\n\t      break;\n\t    case _actions.ATTEMPT_TO_LAND:\n\t      break;\n\t    case _actions.ADD_SHIP:\n\t      var updatedCount = state.getIn(['ships', 'count']) + 1;\n\t      var updatedState = state.setIn(['ships', 'count'], updatedCount);\n\t      var shipWithId = action.ship.set('id', updatedCount);\n\t      return updatedState.setIn(['ships', 'list'], updatedState.getIn(['ships', 'list']).push(shipWithId));\n\t    case _actions.TICK:\n\t      return onTick(state);\n\t  }\n\t  return state;\n\t}\n\n/***/ },\n\n/***/ 204:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.SPEED = undefined;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tvar SPEED = exports.SPEED = 0.1;\n\tvar WIDTH = window.innerWidth;\n\tvar HEIGHT = window.innerHeight;\n\t\n\tvar initialState = new _immutable.Map({\n\t  camera: new _immutable.Map({\n\t    fieldOfView: 1000,\n\t    aspect: WIDTH / HEIGHT,\n\t    near: 1,\n\t    far: 100,\n\t    position: new _immutable.Map({\n\t      x: 0,\n\t      y: 0,\n\t      z: 25\n\t    }),\n\t    rotation: new _immutable.Map({\n\t      x: 0,\n\t      y: 0,\n\t      z: 0\n\t    }),\n\t    lookAt: new _immutable.Map({\n\t      x: 0,\n\t      y: 0,\n\t      z: 0\n\t    })\n\t  }),\n\t  ship: new _immutable.Map({\n\t    id: 1,\n\t    height: 40,\n\t    width: 40,\n\t    rotation: new _immutable.Map({\n\t      x: -4.71,\n\t      y: 4.71,\n\t      z: 0\n\t    }),\n\t    position: new _immutable.Map({\n\t      x: 0,\n\t      y: 0,\n\t      z: 0\n\t    }),\n\t    meshData: new _immutable.Map({\n\t      scale: 0.25,\n\t      jsonUrl: './assets/meshes/ship.json'\n\t    })\n\t  }),\n\t  ships: new _immutable.Map({\n\t    count: 3,\n\t    list: new _immutable.List([new _immutable.Map({\n\t      id: 1,\n\t      height: 40,\n\t      width: 40,\n\t      rotation: 90,\n\t      positionX: 200,\n\t      positionY: 500\n\t    }), new _immutable.Map({\n\t      id: 2,\n\t      height: 40,\n\t      width: 40,\n\t      rotation: 0,\n\t      positionX: 600,\n\t      positionY: 200\n\t    }), new _immutable.Map({\n\t      id: 3,\n\t      height: 40,\n\t      width: 40,\n\t      rotation: 135,\n\t      positionX: 300,\n\t      positionY: 400\n\t    })])\n\t  }),\n\t  keysDown: new _immutable.Map(),\n\t  projectiles: new _immutable.Map({\n\t    count: 0,\n\t    list: new _immutable.List()\n\t  }),\n\t  collisions: new _immutable.List(),\n\t  planets: new _immutable.List([new _immutable.Map({\n\t    height: 120,\n\t    width: 120,\n\t    positionX: 400,\n\t    positionY: 400,\n\t    type: 'blue',\n\t    name: 'Scorpion',\n\t    id: 1\n\t  })]),\n\t  messages: new _immutable.Map({\n\t    count: 1,\n\t    list: new _immutable.List([new _immutable.Map({\n\t      text: 'Welcome to the game; use WASD to fly, spacebar to shoot and L to land on planets',\n\t      id: 1,\n\t      ticks: 200\n\t    })])\n\t  }),\n\t  ticks: 0,\n\t  fps: 60\n\t});\n\t\n\texports.default = initialState;\n\n/***/ },\n\n/***/ 205:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.onTickProjectiles = onTickProjectiles;\n\t\n\tvar _movement = __webpack_require__(206);\n\t\n\tfunction filterVisibleProjectiles(projectile, index, projectiles) {\n\t  var positionX = projectile.get('positionX');\n\t  var positionY = projectile.get('positionY');\n\t  // console.log(`filtering: (${positionX}, ${positionY})`);\n\t  if (positionX > 1000 || positionX < -50 || positionY > 1000 || positionY < 0) {\n\t    return false;\n\t  }\n\t  return true;\n\t}\n\t\n\tfunction onTickProjectiles(state) {\n\t  var projectiles = state.getIn(['projectiles', 'list']);\n\t  var projectilesAfterPruningOffscreen = projectiles.filter(filterVisibleProjectiles);\n\t  var stateWithVisibleProjectilesOnly = state.setIn(['projectiles', 'list'], projectilesAfterPruningOffscreen);\n\t\n\t  var stateWithProjectilePositionChanges = projectilesAfterPruningOffscreen.reduce(function (updatedState, projectile, index) {\n\t    var _calculatePositionCha = (0, _movement.calculatePositionChange)(projectile.get('speed'), projectile.get('rotation'), projectile.get('positionX'), projectile.get('positionY')),\n\t        positionX = _calculatePositionCha.positionX,\n\t        positionY = _calculatePositionCha.positionY;\n\t\n\t    var updatedProjectile = projectile.set('positionX', positionX).set('positionY', positionY);\n\t    return updatedState.setIn(['projectiles', 'list', index], updatedProjectile);\n\t  }, stateWithVisibleProjectilesOnly);\n\t\n\t  return stateWithProjectilePositionChanges;\n\t}\n\n/***/ },\n\n/***/ 206:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.calculatePositionChange = calculatePositionChange;\n\texports.calculateShipPosition = calculateShipPosition;\n\t\n\tvar _initialState = __webpack_require__(204);\n\t\n\tfunction calculatePositionChange(distance, rotation, position) {\n\t  // console.log(`${distance}`);\n\t  var rotationRadians = rotation.y;\n\t  // const rotationRadians = yRotation === 0 ? 0 : Math.PI * yRotation / 180;\n\t\n\t  var x = position.x,\n\t      y = position.y,\n\t      z = position.z;\n\t\n\t  var distanceY = _initialState.SPEED * distance * Math.sin(rotationRadians);\n\t  var distanceX = _initialState.SPEED * distance * Math.cos(rotationRadians);\n\t  var distanceZ = 0;\n\t  // console.log(`rotation: ${rotationRadians}, x dist: ${distanceX}, y dist: ${distanceY}`);\n\t  return {\n\t    x: x + distanceX,\n\t    y: y + distanceY,\n\t    z: z + distanceZ\n\t  };\n\t}\n\t\n\tfunction calculateShipPosition(ship, speed) {\n\t  // dy = d * cos(rotation)\n\t  // dx = d * sin(rotation)\n\t  // could the compute cos and sin of angles up front in a map:\n\t  // rotation -> {cos(rotation), sin(rotation)}\n\t  var _calculatePositionCha = calculatePositionChange(speed, {\n\t    x: ship.getIn(['rotation', 'x']),\n\t    y: ship.getIn(['rotation', 'y']),\n\t    z: ship.getIn(['rotation', 'z'])\n\t  }, {\n\t    x: ship.getIn(['position', 'x']),\n\t    y: ship.getIn(['position', 'y']),\n\t    z: ship.getIn(['position', 'z'])\n\t  }),\n\t      x = _calculatePositionCha.x,\n\t      y = _calculatePositionCha.y,\n\t      z = _calculatePositionCha.z;\n\t\n\t  var updatedState = ship.setIn(['position', 'x'], x).setIn(['position', 'y'], y).setIn(['position', 'z'], z);\n\t  // console.log(`rotation: ${updatedState.get('rotation')}, position: ${updatedState.get('position')}`)\n\t  return updatedState;\n\t}\n\n/***/ },\n\n/***/ 207:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.FIRE_WEAPON = exports.MOVE_SHIP_FW = exports.MOVE_SHIP_BW = exports.TURN_SHIP = undefined;\n\texports.onTickShip = onTickShip;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tvar _movement = __webpack_require__(206);\n\t\n\tvar TURN_SHIP = exports.TURN_SHIP = 'TURN_SHIP';\n\tvar MOVE_SHIP_BW = exports.MOVE_SHIP_BW = 'MOVE_SHIP_BW';\n\tvar MOVE_SHIP_FW = exports.MOVE_SHIP_FW = 'MOVE_SHIP_FW';\n\tvar FIRE_WEAPON = exports.FIRE_WEAPON = 'FIRE_WEAPON';\n\t\n\tfunction buildKeysDownActions(keysDown) {\n\t  var defaultAmount = 0.1;\n\t  var activeActions = [];\n\t  if (keysDown.has('w')) {\n\t    activeActions.push({\n\t      type: MOVE_SHIP_FW,\n\t      speed: 3\n\t    });\n\t  }\n\t  if (keysDown.has('s')) {\n\t    activeActions.push({\n\t      type: MOVE_SHIP_BW,\n\t      speed: -1\n\t    });\n\t  }\n\t  if (keysDown.has('a')) {\n\t    activeActions.push({\n\t      type: TURN_SHIP,\n\t      amount: defaultAmount\n\t    });\n\t  }\n\t  if (keysDown.has('d')) {\n\t    activeActions.push({\n\t      type: TURN_SHIP,\n\t      amount: -defaultAmount\n\t    });\n\t  }\n\t  return new _immutable.List(activeActions);\n\t}\n\t\n\tfunction onTickShip(state) {\n\t  var keysDown = state.get('keysDown');\n\t  var activeKeysDown = keysDown.filter(function (value, key) {\n\t    return value;\n\t  });\n\t\n\t  // update ship state\n\t  var activeActions = buildKeysDownActions(activeKeysDown);\n\t  return activeActions.reduce(function (updatedState, action) {\n\t    switch (action.type) {\n\t      case TURN_SHIP:\n\t        return updatedState.setIn(['ship', 'rotation', 'y'], updatedState.getIn(['ship', 'rotation', 'y']) + action.amount);\n\t      case MOVE_SHIP_FW:\n\t      case MOVE_SHIP_BW:\n\t        return updatedState.set('ship', (0, _movement.calculateShipPosition)(updatedState.get('ship'), action.speed));\n\t    }\n\t  }, state);\n\t}\n\n/***/ },\n\n/***/ 208:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.onTickShips = onTickShips;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tvar _movement = __webpack_require__(206);\n\t\n\tfunction calculateNewPosition(state, speed) {\n\t  // dy = d * cos(rotation)\n\t  // dx = d * sin(rotation)\n\t  // could the compute cos and sin of angles up front in a map:\n\t  // rotation -> {cos(rotation), sin(rotation)}\n\t  var _calculatePositionCha = (0, _movement.calculatePositionChange)(speed, state.get('rotation'), state.get('positionX'), state.get('positionY')),\n\t      positionX = _calculatePositionCha.positionX,\n\t      positionY = _calculatePositionCha.positionY;\n\t\n\t  var updatedState = state.set('positionX', positionX);\n\t  updatedState = updatedState.set('positionY', positionY);\n\t  return updatedState;\n\t}\n\t\n\tfunction onTickShips(state) {\n\t  return state;\n\t}\n\n/***/ },\n\n/***/ 209:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.onTickMessages = onTickMessages;\n\tfunction onTickMessages(state) {\n\t  // decrement the ticks on each message\n\t  var messages = state.getIn(['messages', 'list']);\n\t  var updatedMessages = messages\n\t  // filter out messages that will expire on this tick\n\t  .filter(function (message) {\n\t    var ticks = message.get('ticks');\n\t    return !(ticks - 1 < 0);\n\t  }).map(function (message) {\n\t    var ticks = message.get('ticks');\n\t    if (ticks) {\n\t      return message.set('ticks', ticks - 1);\n\t    }\n\t    return message;\n\t  });\n\t  return state.setIn(['messages', 'list'], updatedMessages);\n\t}\n\n/***/ },\n\n/***/ 210:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.onTickFPS = onTickFPS;\n\tvar startTimeMilliSeconds = Math.trunc(new Date().valueOf());\n\t\n\tvar MAX_SAMPLING_TIME_MS_DELTA = 3000;\n\tvar MIN_FRAMES_PER_SEC = 25;\n\tvar MIN_FRAMES_PER_SAMPLE = MIN_FRAMES_PER_SEC * MAX_SAMPLING_TIME_MS_DELTA / 1000;\n\t\n\tfunction onTickFPS(state) {\n\t  var ticks = state.get('ticks');\n\t  var newTimeSeconds = Math.trunc(new Date().valueOf());\n\t  var timeDelta = newTimeSeconds - startTimeMilliSeconds;\n\t  var updatedState = state;\n\t  if (timeDelta >= MAX_SAMPLING_TIME_MS_DELTA) {\n\t    if (ticks < MIN_FRAMES_PER_SAMPLE) console.warn('ticks are low at ' + MAX_SAMPLING_TIME_MS_DELTA / 1000 + ' seconds: ' + ticks);\n\t    startTimeMilliSeconds = newTimeSeconds;\n\t    updatedState = state.set('ticks', 0);\n\t  }\n\t  var avgFps = Math.trunc(1000 * ticks / timeDelta);\n\t  return updatedState.set('ticks', updatedState.get('ticks') + 1).set('fps', avgFps);\n\t}\n\n/***/ },\n\n/***/ 211:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.fireWeapon = fireWeapon;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tfunction fireWeapon(state) {\n\t  var ship = state.get('ship');\n\t  var rotation = ship.get('rotation'); // comes out same rotation as ship\n\t  var positionX = ship.get('positionX');\n\t  var positionY = ship.get('positionY');\n\t  var updatedCount = state.getIn(['projectiles', 'count']) + 1;\n\t\n\t  var newProjectileProps = new _immutable.Map({\n\t    rotation: rotation, positionX: positionX, positionY: positionY,\n\t    height: 40,\n\t    width: 40,\n\t    speed: 15,\n\t    id: updatedCount\n\t  });\n\t\n\t  var currentProjectiles = state.getIn(['projectiles', 'list']);\n\t  var updatedProjectiles = currentProjectiles.push(newProjectileProps);\n\t  var updatedState = state.setIn(['projectiles', 'count'], updatedCount);\n\t  return updatedState.setIn(['projectiles', 'list'], updatedProjectiles);\n\t}\n\n/***/ },\n\n/***/ 212:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.landOnPlanet = landOnPlanet;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tvar _doCirclesOverlap = __webpack_require__(213);\n\t\n\tvar _doCirclesOverlap2 = _interopRequireDefault(_doCirclesOverlap);\n\t\n\tvar _addMessage = __webpack_require__(214);\n\t\n\tvar _addMessage2 = _interopRequireDefault(_addMessage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar LANDING_RANGE = 50;\n\tvar HAILING_RANGE = 100;\n\t\n\tfunction landOnPlanet(state, ship) {\n\t  var planets = state.get('planets');\n\t  var closestPlanet = findClosestPlanetInHailing(planets, ship);\n\t  if (!closestPlanet) {\n\t    return state;\n\t  }\n\t  var messageCount = state.getIn(['messages', 'count']);\n\t  var updatedMsgCount = messageCount + 1;\n\t  var hailResult = hailPlanet(closestPlanet, ship, updatedMsgCount);\n\t  if (hailResult.get('status') === 'ok') {\n\t    var existingMsgs = state.getIn(['messages', 'list']);\n\t    if (withinRange(closestPlanet, ship, LANDING_RANGE)) {\n\t      var landingResult = attemptLanding(closestPlanet, ship, messageCount);\n\t      var _newMsg = landingResult.get('message');\n\t      var previousHailMessageIndex = existingMsgs.findIndex(function (message) {\n\t        return message.get('text') == 'cleared for landing';\n\t      });\n\t      var existingMsgsWithoutHail = previousHailMessageIndex != -1 ? existingMsgs.delete(previousHailMessageIndex) : existingMsgs;\n\t      return (0, _addMessage2.default)(state.setIn(['messages', 'list'], existingMsgsWithoutHail), _newMsg);\n\t    }\n\t    var newMsg = hailResult.get('message');\n\t    var updatedMsgs = existingMsgs.concat([newMsg]);\n\t    return state.setIn(['messages', 'count'], updatedMsgCount).setIn(['messages', 'list'], updatedMsgs);\n\t  }\n\t  return state;\n\t}\n\t\n\tfunction attemptLanding(planet, ship, messageCount) {\n\t  return new _immutable.Map({\n\t    status: 'ok',\n\t    message: new _immutable.Map({\n\t      text: 'Welcome to ' + planet.get('name'),\n\t      ticks: 80,\n\t      id: messageCount + 1\n\t    })\n\t  });\n\t}\n\t\n\tfunction hailPlanet(planet, ship, messageCount) {\n\t  if (allowedToLand(planet, ship)) {\n\t    return new _immutable.Map({\n\t      status: 'ok',\n\t      message: new _immutable.Map({\n\t        text: 'cleared for landing',\n\t        ticks: 200,\n\t        id: messageCount + 1\n\t      })\n\t    });\n\t  }\n\t  return new _immutable.Map({\n\t    status: 'not_allowed',\n\t    message: new _immutable.Map({\n\t      text: 'not allowed to land',\n\t      id: messageCount + 1\n\t    })\n\t  });\n\t}\n\t\n\tfunction allowedToLand(planet, ship) {\n\t  return true;\n\t}\n\t\n\tfunction findClosestPlanetInHailing(planets, ship) {\n\t  var planetsWithinRangeOfShip = planets.filter(function (planet) {\n\t    return withinRange(planet, ship, HAILING_RANGE);\n\t  });\n\t  // TODO: when there's multiple planets in range, do something\n\t  // smarter here and pick the closest one\n\t  var closestPlanet = planetsWithinRangeOfShip.size == 1 ? planetsWithinRangeOfShip.first() : planetsWithinRangeOfShip.reduce(function (closestPlanetSoFar, planet) {\n\t    return closestPlanetSoFar;\n\t  }, planetsWithinRangeOfShip.get(0));\n\t  return closestPlanet;\n\t}\n\t\n\tfunction withinRange(planet, ship, range) {\n\t  // compare circles using the range plus the radii of the planet and ships\n\t  var planetX = planet.get('positionX');\n\t  var planetY = planet.get('positionY');\n\t  var planetHeight = planet.get('height');\n\t  var planetWidth = planet.get('width');\n\t  var shipX = ship.get('positionX');\n\t  var shipY = ship.get('positionY');\n\t  var shipHeight = ship.get('height');\n\t  var shipWidth = ship.get('width');\n\t\n\t  var planetRadius = planetWidth >= planetHeight ? planetWidth / 2 : planetHeight / 2;\n\t  var shipRadius = shipWidth >= shipHeight ? shipWidth / 2 : shipHeight / 2;\n\t  var planetCircle = {\n\t    center: { top: planetY + planetRadius, left: planetX + planetRadius },\n\t    radius: planetRadius + range\n\t  };\n\t  var shipCircle = {\n\t    center: { top: shipY + shipRadius, left: shipX + shipRadius },\n\t    radius: shipRadius\n\t  };\n\t  return (0, _doCirclesOverlap2.default)(planetCircle, shipCircle);\n\t}\n\n/***/ },\n\n/***/ 213:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = doCirclesOverlap;\n\tfunction doCirclesOverlap(circle1, circle2) {\n\t  // find the distance between the centers and compare to the sum of the radii\n\t  var dx = circle1.center.top - circle2.center.top;\n\t  var dy = circle1.center.left - circle2.center.left;\n\t  // taking square roots is more expensive than squaring the sum of the radii\n\t  var dSqr = dx * dx + dy * dy;\n\t  var radiusSumSqr = (circle1.radius + circle2.radius) * (circle1.radius + circle2.radius);\n\t  if (dSqr - radiusSumSqr < 500) {\n\t    // console.log(`difference between ${circle1.center.top} and ${circle2.center.top}`);\n\t    // console.log(`difference between ${circle1.center.left} and ${circle2.center.left}`);\n\t    // console.log(`collision close: ${dSqr} vs ${radiusSumSqr}`)\n\t  }\n\t  return dSqr <= radiusSumSqr;\n\t}\n\n/***/ },\n\n/***/ 214:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = addMessage;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tfunction addMessage(state, message) {\n\t  var text = message.text,\n\t      ticks = message.ticks;\n\t\n\t  var messages = state.get('messages');\n\t  var count = messages.get('count');\n\t  var list = messages.get('list');\n\t  var updatedMsgList = list.push(new _immutable.Map({\n\t    id: count + 1,\n\t    text: text, ticks: ticks\n\t  }));\n\t  return state.setIn(['messages', 'list'], updatedMsgList).setIn(['messages', 'count'], count + 1);\n\t}\n\n/***/ },\n\n/***/ 215:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.collisionDetector = collisionDetector;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tvar _doCirclesOverlap = __webpack_require__(213);\n\t\n\tvar _doCirclesOverlap2 = _interopRequireDefault(_doCirclesOverlap);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction findOverlap(obj1, obj2) {\n\t  var obj1Height = obj1.get('height');\n\t  var obj1Width = obj1.get('width');\n\t  var obj1X = obj1.get('positionX');\n\t  var obj1Y = obj1.get('positionY');\n\t  var obj2Height = obj2.get('height');\n\t  var obj2Width = obj2.get('width');\n\t  var obj2X = obj2.get('positionX');\n\t  var obj2Y = obj2.get('positionY');\n\t  // use overlapping circles to determine if there's a collision\n\t  // create circles for each obj\n\t  var obj1Radius = obj1Width >= obj1Height ? obj1Width / 2 : obj1Height / 2;\n\t  var circle1 = {\n\t    center: { top: obj1Y + obj1Radius, left: obj1X + obj1Radius },\n\t    radius: obj1Radius\n\t  };\n\t  var obj2Radius = obj2Width >= obj2Height ? obj2Width / 2 : obj2Height / 2;\n\t  var circle2 = {\n\t    center: { top: obj2Y + obj2Radius, left: obj2X + obj2Radius },\n\t    radius: obj2Radius\n\t  };\n\t  // find if the circles overlap\n\t  // TODO: find direction/side that the collision happened?\n\t  return (0, _doCirclesOverlap2.default)(circle1, circle2);\n\t}\n\t\n\tfunction collisionDetector(state) {\n\t  var projectiles = state.getIn(['projectiles', 'list']);\n\t  var ships = state.getIn(['ships', 'list']);\n\t  var updatedStateWithCollisions = projectiles.reduce(function (updatedState, projectile, projectileIndex) {\n\t    var existingCollisionsDetected = updatedState.get('collisions');\n\t    var collisionsFound = ships.filter(function (ship) {\n\t      return findOverlap(projectile, ship);\n\t    }).map(function (ship) {\n\t      // console.log(`collision detected`);\n\t      // console.log(`collision detected: projectile: ${projectile}, ship: ${ship}`);\n\t      // return a collision record to be resolved\n\t      return new _immutable.Map({\n\t        projectile: projectile, ship: ship\n\t      });\n\t    });\n\t    return updatedState.set('collisions', collisionsFound.concat(existingCollisionsDetected));\n\t  }, state);\n\t  return updatedStateWithCollisions;\n\t}\n\n/***/ },\n\n/***/ 216:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.collisionResolver = collisionResolver;\n\t\n\tvar _immutable = __webpack_require__(202);\n\t\n\tvar _addMessage = __webpack_require__(214);\n\t\n\tvar _addMessage2 = _interopRequireDefault(_addMessage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction resolveCollision(state, collision) {\n\t  if (!collision) return state;\n\t  var projectile = collision.get('projectile');\n\t  var projectileId = projectile.get('id');\n\t  var ship = collision.get('ship');\n\t  var shipId = ship.get('id');\n\t  // console.log(`resolving collision: projectile: ${projectile}, ship: ${ship}`);\n\t  var projectileIndex = state.getIn(['projectiles', 'list']).findIndex(function (projectile) {\n\t    return projectile.get('id') == projectileId;\n\t  });\n\t  var shipIndex = state.getIn(['ships', 'list']).findIndex(function (ship) {\n\t    return ship.get('id') == shipId;\n\t  });\n\t  var stateWithoutProjectile = state.deleteIn(['projectiles', 'list', projectileIndex]);\n\t  var stateWithoutShip = stateWithoutProjectile.deleteIn(['ships', 'list', shipIndex]);\n\t  return stateWithoutShip;\n\t}\n\t\n\tfunction collisionResolver(state) {\n\t  var collisions = state.get('collisions');\n\t  if (collisions.size > 0) {\n\t    var stateWithResolvedCollisions = collisions.reduce(function (updatedState, collision) {\n\t      var message = {\n\t        text: 'Ship was destroyed',\n\t        ticks: 100\n\t      };\n\t      var stateWithMessage = (0, _addMessage2.default)(updatedState, message);\n\t      // console.log(`adding message: ${message.text}`);\n\t      return resolveCollision(stateWithMessage, collision);\n\t    }, state);\n\t    return stateWithResolvedCollisions.set('collisions', new _immutable.List());\n\t  }\n\t  return state;\n\t}\n\n/***/ },\n\n/***/ 217:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.init = init;\n\t\n\tvar _three = __webpack_require__(218);\n\t\n\tvar _threex = __webpack_require__(219);\n\t\n\tvar _threex2 = _interopRequireDefault(_threex);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar scene = void 0,\n\t    camera = void 0,\n\t    renderer = void 0;\n\tvar cube = void 0;\n\tvar SPEED = 0.01;\n\tvar WIDTH = window.innerWidth;\n\tvar HEIGHT = window.innerHeight;\n\t\n\tvar domEvents = void 0;\n\t\n\tvar _unsubscribe = void 0,\n\t    _store = void 0;\n\t\n\tvar mesh = null;\n\tfunction initShip(ship) {\n\t  var shipMeshData = ship.get('meshData');\n\t  var loader = new _three.JSONLoader();\n\t  loader.load(shipMeshData.get('jsonUrl'), function (geometry, materials) {\n\t    // meshnormalmaterial is a solid color\n\t    var material = new _three.MeshNormalMaterial(materials[0]);\n\t    mesh = new _three.Mesh(geometry, material);\n\t    mesh.scale.x = mesh.scale.y = mesh.scale.z = shipMeshData.get('scale');\n\t    mesh.translation = geometry.center();\n\t    mesh.position.x = ship.getIn(['position', 'x']);\n\t    mesh.position.y = ship.getIn(['position', 'y']);\n\t    mesh.position.z = ship.getIn(['position', 'z']);\n\t    scene.add(mesh);\n\t\n\t    // wireframe\n\t    var geo = new _three.EdgesGeometry(mesh.geometry); // or WireframeGeometry\n\t    var mat = new _three.LineBasicMaterial({ color: 0x000000, linewidth: 2 });\n\t    var wireframe = new _three.LineSegments(geo, mat);\n\t    mesh.add(wireframe);\n\t\n\t    rotateMesh();\n\t  });\n\t}\n\t\n\tfunction rotateMesh() {\n\t  if (!mesh) {\n\t    return;\n\t  }\n\t  // TODO: add a key command for this and adjust until its right - then investigate why\n\t  mesh.rotation.set(1.57, 4.71, 0);\n\t}\n\t\n\tfunction init(store) {\n\t  _store = store;\n\t  _unsubscribe = store.subscribe(function () {\n\t    return console.log(store.getState());\n\t  });\n\t\n\t  scene = new _three.Scene();\n\t  initShip(_store.getState().gameLoop.get('ship'));\n\t  initCamera(_store.getState().gameLoop.get('camera'));\n\t  initLights();\n\t  initRenderer();\n\t\n\t  document.body.appendChild(renderer.domElement);\n\t  // domEvents\t= new DomEvents(camera, renderer.domElement);\n\t  //\n\t  // domEvents.addEventListener(cube, 'click', () => {\n\t  //   console.log('clicked');\n\t  // });\n\t  render();\n\t}\n\t\n\tfunction initLights() {\n\t  var light = new _three.AmbientLight(0xffffff);\n\t  scene.add(light);\n\t}\n\t\n\tfunction initCamera(cameraData) {\n\t  camera = new _three.PerspectiveCamera(cameraData.get('fieldOfView'), cameraData.get('aspect'), cameraData.get('near'), cameraData.get('far'));\n\t  camera.rotation.set(cameraData.getIn(['rotation', 'x']), cameraData.getIn(['rotation', 'y']), cameraData.getIn(['rotation', 'z']));\n\t  camera.position.set(cameraData.getIn(['position', 'x']), cameraData.getIn(['position', 'y']), cameraData.getIn(['position', 'z']));\n\t  camera.lookAt(new _three.Vector3(cameraData.getIn(['lookAt', 'x']), cameraData.getIn(['lookAt', 'y']), cameraData.getIn(['lookAt', 'z'])));\n\t}\n\t\n\tfunction initRenderer() {\n\t  renderer = new _three.WebGLRenderer({ antialias: true });\n\t  renderer.setSize(WIDTH, HEIGHT);\n\t}\n\t\n\tfunction render() {\n\t  requestAnimationFrame(render);\n\t  // rotateMesh();\n\t  renderer.render(scene, camera);\n\t}\n\n/***/ },\n\n/***/ 220:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactRedux = __webpack_require__(170);\n\t\n\tvar _actions = __webpack_require__(201);\n\t\n\tvar _three = __webpack_require__(218);\n\t\n\tvar _bluebird = __webpack_require__(221);\n\t\n\tvar _bluebird2 = _interopRequireDefault(_bluebird);\n\t\n\tvar _Message = __webpack_require__(224);\n\t\n\tvar _Message2 = _interopRequireDefault(_Message);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar LOOP_INTERVALS = 25;\n\tvar WIDTH = 600;\n\tvar HEIGHT = 600;\n\t\n\tvar AppComponent = function (_PureComponent) {\n\t  _inherits(AppComponent, _PureComponent);\n\t\n\t  function AppComponent(props) {\n\t    _classCallCheck(this, AppComponent);\n\t\n\t    var _this = _possibleConstructorReturn(this, (AppComponent.__proto__ || Object.getPrototypeOf(AppComponent)).call(this, props));\n\t\n\t    _this._loopInterval = null;\n\t\n\t    _this.state = {\n\t      loopRequest: 0\n\t    };\n\t\n\t    _this.onButtonClick = _this._onButtonClick.bind(_this);\n\t    _this.onKeyDown = _this._onKeyDown.bind(_this);\n\t    _this.onKeyUp = _this._onKeyUp.bind(_this);\n\t    _this.onLoopTick = _this._onLoopTick.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(AppComponent, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      return _react2.default.createElement(\n\t        'div',\n\t        { className: 'App' },\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'interface' },\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'top-bar' },\n\t            _react2.default.createElement(\n\t              'button',\n\t              { className: 'menu-button', onClick: function onClick() {\n\t                  return _this2.onButtonClick();\n\t                } },\n\t              'Add Ship'\n\t            )\n\t          ),\n\t          _react2.default.createElement('div', { id: 'canvasContainer' }),\n\t          _react2.default.createElement(\n\t            'div',\n\t            { className: 'bottom-bar' },\n\t            _react2.default.createElement(\n\t              'div',\n\t              null,\n\t              'FPS: ',\n\t              this.props.gameLoop.get('fps')\n\t            ),\n\t            _react2.default.createElement(\n\t              'div',\n\t              null,\n\t              this._renderMessages()\n\t            )\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }, {\n\t    key: '_renderMessages',\n\t    value: function _renderMessages() {\n\t      return this.props.gameLoop.getIn(['messages', 'list']).map(function (message, index) {\n\t        return _react2.default.createElement(_Message2.default, { key: message.get('id'), data: message });\n\t      });\n\t    }\n\t  }, {\n\t    key: '_onButtonClick',\n\t    value: function _onButtonClick() {\n\t      this.props.onButtonClick();\n\t    }\n\t  }, {\n\t    key: '_onKeyDown',\n\t    value: function _onKeyDown(event) {\n\t      this.props.onKeyDown(event.key);\n\t    }\n\t  }, {\n\t    key: '_onKeyUp',\n\t    value: function _onKeyUp(event) {\n\t      this.props.onKeyUp(event.key);\n\t    }\n\t  }, {\n\t    key: '_onLoopTick',\n\t    value: function _onLoopTick() {\n\t      this.props.onLoopTick();\n\t\n\t      // update scene with state\n\t      updateShip(this._ship, this.props.gameLoop.get('ship'));\n\t\n\t      this._renderer.render(this._scene, this._camera);\n\t      this._loopInterval = window.setTimeout(this.onLoopTick, LOOP_INTERVALS);\n\t    }\n\t  }, {\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      var _this3 = this;\n\t\n\t      window.addEventListener(\"keydown\", this.onKeyDown);\n\t      window.addEventListener(\"keyup\", this.onKeyUp);\n\t      this._loopInterval = window.setTimeout(this.onLoopTick, LOOP_INTERVALS);\n\t\n\t      var gameLoop = this.props.gameLoop;\n\t\n\t\n\t      this._scene = new _three.Scene();\n\t      this._renderer = this._initRenderer();\n\t      this._camera = this._initCamera(gameLoop.get('camera'));\n\t      this._lights = this._initLights(gameLoop.get('lights'));\n\t      this._initShip(gameLoop.get('ship')).then(function (shipMesh) {\n\t        _this3._ship = shipMesh;\n\t      });\n\t      document.getElementById('canvasContainer').appendChild(this._renderer.domElement);\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      window.removeEventListener(\"keydown\", this.onKeyDown);\n\t      window.removeEventListener(\"keyup\", this.onKeyUp);\n\t      window.clearTimeout(this._loopInterval);\n\t      this._loopInterval = null;\n\t    }\n\t  }, {\n\t    key: '_initShip',\n\t    value: function _initShip(ship) {\n\t      var _this4 = this;\n\t\n\t      var shipMeshData = ship.get('meshData');\n\t\n\t      var loader = new _three.JSONLoader();\n\t      var promise = new _bluebird2.default(function (resolve, reject) {\n\t        loader.load(shipMeshData.get('jsonUrl'), function (geometry, materials) {\n\t          resolve({ geometry: geometry, materials: materials });\n\t        });\n\t      });\n\t      return promise.then(function (jsonData) {\n\t        var geometry = jsonData.geometry,\n\t            materials = jsonData.materials;\n\t        // meshnormalmaterial is a solid color\n\t\n\t        var material = new _three.MeshNormalMaterial(materials[0]);\n\t        var mesh = new _three.Mesh(geometry, material);\n\t        mesh.scale.x = mesh.scale.y = mesh.scale.z = shipMeshData.get('scale');\n\t        mesh.translation = geometry.center();\n\t        mesh.position.x = ship.getIn(['position', 'x']);\n\t        mesh.position.y = ship.getIn(['position', 'y']);\n\t        mesh.position.z = ship.getIn(['position', 'z']);\n\t        _this4._scene.add(mesh);\n\t\n\t        // wireframe\n\t        var geo = new _three.EdgesGeometry(mesh.geometry); // or WireframeGeometry\n\t        var mat = new _three.LineBasicMaterial({ color: 0x000000, linewidth: 2 });\n\t        var wireframe = new _three.LineSegments(geo, mat);\n\t        mesh.add(wireframe);\n\t        return mesh;\n\t      });\n\t    }\n\t  }, {\n\t    key: '_initCamera',\n\t    value: function _initCamera(cameraData) {\n\t      var camera = new _three.PerspectiveCamera(cameraData.get('fieldOfView'), cameraData.get('aspect'), cameraData.get('near'), cameraData.get('far'));\n\t      camera.rotation.set(cameraData.getIn(['rotation', 'x']), cameraData.getIn(['rotation', 'y']), cameraData.getIn(['rotation', 'z']));\n\t      camera.position.set(cameraData.getIn(['position', 'x']), cameraData.getIn(['position', 'y']), cameraData.getIn(['position', 'z']));\n\t      camera.lookAt(new _three.Vector3(cameraData.getIn(['lookAt', 'x']), cameraData.getIn(['lookAt', 'y']), cameraData.getIn(['lookAt', 'z'])));\n\t      return camera;\n\t    }\n\t  }, {\n\t    key: '_initRenderer',\n\t    value: function _initRenderer() {\n\t      var renderer = new _three.WebGLRenderer({ antialias: true });\n\t      renderer.setSize(WIDTH, HEIGHT);\n\t      return renderer;\n\t    }\n\t  }, {\n\t    key: '_initLights',\n\t    value: function _initLights() {\n\t      var light = new _three.AmbientLight(0xffffff);\n\t      this._scene.add(light);\n\t      return light;\n\t    }\n\t  }]);\n\t\n\t  return AppComponent;\n\t}(_react.PureComponent);\n\t\n\t// move these to separate files:\n\t\n\t\n\tfunction updateShip(ship, shipState) {\n\t  if (!ship) return;\n\t  ship.position.x = shipState.getIn(['position', 'x']);\n\t  ship.position.y = shipState.getIn(['position', 'y']);\n\t  ship.position.z = shipState.getIn(['position', 'z']);\n\t  ship.rotation.x = shipState.getIn(['rotation', 'x']);\n\t  ship.rotation.y = shipState.getIn(['rotation', 'y']);\n\t  ship.rotation.z = shipState.getIn(['rotation', 'z']);\n\t}\n\t\n\tAppComponent.propTypes = {\n\t  count: _react2.default.PropTypes.number,\n\t  gameLoop: _react2.default.PropTypes.object\n\t};\n\t\n\tvar mapStateToProps = function mapStateToProps(state) {\n\t  return {\n\t    count: state.base.count,\n\t    gameLoop: state.gameLoop\n\t  };\n\t};\n\t\n\tvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n\t  return {\n\t    onButtonClick: function onButtonClick() {\n\t      dispatch((0, _actions.addShip)());\n\t    },\n\t    onKeyDown: function onKeyDown(key) {\n\t      dispatch((0, _actions.handleInputKeyDown)(key));\n\t    },\n\t    onKeyUp: function onKeyUp(key) {\n\t      dispatch((0, _actions.handleInputKeyUp)(key));\n\t    },\n\t    onLoopTick: function onLoopTick() {\n\t      dispatch((0, _actions.loopTick)());\n\t    }\n\t  };\n\t};\n\t\n\tvar App = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(AppComponent);\n\t\n\texports.default = App;\n\n/***/ },\n\n/***/ 224:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Message = function (_Component) {\n\t  _inherits(Message, _Component);\n\t\n\t  function Message() {\n\t    _classCallCheck(this, Message);\n\t\n\t    return _possibleConstructorReturn(this, (Message.__proto__ || Object.getPrototypeOf(Message)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(Message, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var messageText = this.props.data.get('text');\n\t      return _react2.default.createElement(\n\t        'div',\n\t        { className: 'message' },\n\t        messageText\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Message;\n\t}(_react.Component);\n\t\n\texports.default = Message;\n\n/***/ },\n\n/***/ 225:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(226);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(228)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./main.css\", function() {\n\t\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./main.css\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 226:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(227)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"body{background:#add8e6;margin:0;padding:0}.outline{border:1px solid #000;border-radius:20px}.interface{display:flex;flex-direction:column;justify-content:space-between;height:700px}.top-bar{height:50px;width:90%;background-color:grey;padding-top:10px;padding-left:10px}.menu-button{height:30px}.message-bar{height:50px;width:90%;background-color:grey;padding-top:10px;padding-left:10px}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 227:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\n\t// css base code, injected by the css-loader\n\tmodule.exports = function () {\n\t\tvar list = [];\n\t\n\t\t// return the list of modules as css string\n\t\tlist.toString = function toString() {\n\t\t\tvar result = [];\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar item = this[i];\n\t\t\t\tif (item[2]) {\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(item[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result.join(\"\");\n\t\t};\n\t\n\t\t// import a list of modules into the list\n\t\tlist.i = function (modules, mediaQuery) {\n\t\t\tif (typeof modules === \"string\") modules = [[null, modules, \"\"]];\n\t\t\tvar alreadyImportedModules = {};\n\t\t\tfor (var i = 0; i < this.length; i++) {\n\t\t\t\tvar id = this[i][0];\n\t\t\t\tif (typeof id === \"number\") alreadyImportedModules[id] = true;\n\t\t\t}\n\t\t\tfor (i = 0; i < modules.length; i++) {\n\t\t\t\tvar item = modules[i];\n\t\t\t\t// skip already imported module\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\t\tif (typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\t\tif (mediaQuery && !item[2]) {\n\t\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t\t} else if (mediaQuery) {\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tlist.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn list;\n\t};\n\n/***/ },\n\n/***/ 228:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\tvar stylesInDom = {},\r\n\t\tmemoize = function(fn) {\r\n\t\t\tvar memo;\r\n\t\t\treturn function () {\r\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\t\treturn memo;\r\n\t\t\t};\r\n\t\t},\r\n\t\tisOldIE = memoize(function() {\r\n\t\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t\t}),\r\n\t\tgetHeadElement = memoize(function () {\r\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t\t}),\r\n\t\tsingletonElement = null,\r\n\t\tsingletonCounter = 0,\r\n\t\tstyleElementsInsertedAtTop = [];\r\n\t\r\n\tmodule.exports = function(list, options) {\r\n\t\tif(false) {\r\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t\t}\r\n\t\r\n\t\toptions = options || {};\r\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t\t// tags it will allow on a page\r\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\t\r\n\t\t// By default, add <style> tags to the bottom of <head>.\r\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\t\r\n\t\tvar styles = listToStyles(list);\r\n\t\taddStylesToDom(styles, options);\r\n\t\r\n\t\treturn function update(newList) {\r\n\t\t\tvar mayRemove = [];\r\n\t\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\t\tvar item = styles[i];\r\n\t\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\t\tdomStyle.refs--;\r\n\t\t\t\tmayRemove.push(domStyle);\r\n\t\t\t}\r\n\t\t\tif(newList) {\r\n\t\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\t\taddStylesToDom(newStyles, options);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addStylesToDom(styles, options) {\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tif(domStyle) {\r\n\t\t\t\tdomStyle.refs++;\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t\t}\r\n\t\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction listToStyles(list) {\r\n\t\tvar styles = [];\r\n\t\tvar newStyles = {};\r\n\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i];\r\n\t\t\tvar id = item[0];\r\n\t\t\tvar css = item[1];\r\n\t\t\tvar media = item[2];\r\n\t\t\tvar sourceMap = item[3];\r\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\t\tif(!newStyles[id])\r\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\t\telse\r\n\t\t\t\tnewStyles[id].parts.push(part);\r\n\t\t}\r\n\t\treturn styles;\r\n\t}\r\n\t\r\n\tfunction insertStyleElement(options, styleElement) {\r\n\t\tvar head = getHeadElement();\r\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\t\tif (options.insertAt === \"top\") {\r\n\t\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t}\r\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t\t} else if (options.insertAt === \"bottom\") {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction removeStyleElement(styleElement) {\r\n\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\t\tif(idx >= 0) {\r\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction createStyleElement(options) {\r\n\t\tvar styleElement = document.createElement(\"style\");\r\n\t\tstyleElement.type = \"text/css\";\r\n\t\tinsertStyleElement(options, styleElement);\r\n\t\treturn styleElement;\r\n\t}\r\n\t\r\n\tfunction createLinkElement(options) {\r\n\t\tvar linkElement = document.createElement(\"link\");\r\n\t\tlinkElement.rel = \"stylesheet\";\r\n\t\tinsertStyleElement(options, linkElement);\r\n\t\treturn linkElement;\r\n\t}\r\n\t\r\n\tfunction addStyle(obj, options) {\r\n\t\tvar styleElement, update, remove;\r\n\t\r\n\t\tif (options.singleton) {\r\n\t\t\tvar styleIndex = singletonCounter++;\r\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t\t} else if(obj.sourceMap &&\r\n\t\t\ttypeof URL === \"function\" &&\r\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\t\ttypeof Blob === \"function\" &&\r\n\t\t\ttypeof btoa === \"function\") {\r\n\t\t\tstyleElement = createLinkElement(options);\r\n\t\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t\tif(styleElement.href)\r\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tstyleElement = createStyleElement(options);\r\n\t\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\tupdate(obj);\r\n\t\r\n\t\treturn function updateStyle(newObj) {\r\n\t\t\tif(newObj) {\r\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tupdate(obj = newObj);\r\n\t\t\t} else {\r\n\t\t\t\tremove();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar replaceText = (function () {\r\n\t\tvar textStore = [];\r\n\t\r\n\t\treturn function (index, replacement) {\r\n\t\t\ttextStore[index] = replacement;\r\n\t\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t\t};\r\n\t})();\r\n\t\r\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\t\tvar css = remove ? \"\" : obj.css;\r\n\t\r\n\t\tif (styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t\t} else {\r\n\t\t\tvar cssNode = document.createTextNode(css);\r\n\t\t\tvar childNodes = styleElement.childNodes;\r\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\t\tif (childNodes.length) {\r\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t\t} else {\r\n\t\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction applyToTag(styleElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\r\n\t\tif(media) {\r\n\t\t\tstyleElement.setAttribute(\"media\", media)\r\n\t\t}\r\n\t\r\n\t\tif(styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\twhile(styleElement.firstChild) {\r\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t\t}\r\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateLink(linkElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(sourceMap) {\r\n\t\t\t// http://stackoverflow.com/a/26603875\r\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t\t}\r\n\t\r\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\t\r\n\t\tvar oldSrc = linkElement.href;\r\n\t\r\n\t\tlinkElement.href = URL.createObjectURL(blob);\r\n\t\r\n\t\tif(oldSrc)\r\n\t\t\tURL.revokeObjectURL(oldSrc);\r\n\t}\r\n\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// app.6ceae429de7f5095eafc.js","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport {createStore} from 'redux';\r\nimport spaceApp from './reducers/reducers';\r\n\r\nimport {init} from './canvas';\r\nimport App from './app';\r\n\r\nimport './main.css';\r\n\r\nlet store = createStore(spaceApp);\r\n\r\nconst props = {\r\n};\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App {...props}/>\r\n  </Provider>,\r\n  document.getElementById('root'));\n\n\n// WEBPACK FOOTER //\n// ./app/index.js","import {combineReducers} from 'redux';\r\nimport {ADD} from '../api/actions';\r\nimport gameLoop from './gameLoop';\r\n\r\nconst baseInitialState = {\r\n  count: 0\r\n};\r\n\r\nfunction base(state = baseInitialState, action) {\r\n  switch (action.type) {\r\n    case ADD:\r\n      return Object.assign({}, state, {\r\n        count: state.count + 1\r\n      });\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst spaceApp = combineReducers({\r\n  base,\r\n  gameLoop\r\n});\r\n\r\nexport default spaceApp\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/reducers.js","import {Map, Set} from 'immutable';\r\n\r\nexport const ADD = 'ADD';\r\nexport const ADD_SHIP = 'ADD_SHIP';\r\nexport const UNHANDLED = 'UNHANDLED';\r\nexport const KEY_DOWN = 'KEY_DOWN';\r\nexport const MOVE_KEY_DOWN = 'MOVE_KEY_DOWN';\r\nexport const KEY_UP = 'KEY_UP';\r\nexport const MOVE_KEY_UP = 'MOVE_KEY_UP';\r\nexport const TICK = 'TICK';\r\nexport const ATTEMPT_TO_LAND = 'ATTEMPT_TO_LAND';\r\n\r\nexport function add(num) {\r\n  return {type: ADD, num}\r\n}\r\n\r\nexport function attemptToLandOnPlanet(ship) {\r\n  return {\r\n    type: ATTEMPT_TO_LAND,\r\n    ship: ship\r\n  }\r\n}\r\n\r\nexport function addShip() {\r\n  const rotation = getRandomArbitrary(0, 360);\r\n  const x = getRandomArbitrary(10, 800);\r\n  const y = getRandomArbitrary(100, 800);\r\n  return {\r\n    type: ADD_SHIP,\r\n    ship: new Map({\r\n      height: 40,\r\n      width: 40,\r\n      rotation: rotation,\r\n      positionX: x,\r\n      positionY: y\r\n    })\r\n  }\r\n}\r\n\r\nfunction getRandomArbitrary(min, max) {\r\n  return Math.random() * (max - min) + min;\r\n}\r\n\r\nconst MOVEMENT_KEYS = new Set(['w', 'a', 's', 'd']);\r\n\r\nexport function handleInputKeyDown(keyDown) {\r\n  let actionType;\r\n  if (MOVEMENT_KEYS.has(keyDown)) {\r\n    actionType = MOVE_KEY_DOWN\r\n  } else {\r\n    actionType = KEY_DOWN\r\n  }\r\n  return {\r\n    type: actionType,\r\n    key: keyDown\r\n  }\r\n}\r\n\r\nexport function handleInputKeyUp(keyUp) {\r\n  let actionType;\r\n  if (MOVEMENT_KEYS.has(keyUp)) {\r\n    actionType = MOVE_KEY_UP\r\n  } else {\r\n    actionType = UNHANDLED\r\n  }\r\n  return {\r\n    type: actionType,\r\n    key: keyUp\r\n  }\r\n}\r\n\r\nexport function loopTick() {\r\n  return {\r\n    type: TICK\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/api/actions.js","import {\r\n  MOVE_KEY_DOWN, MOVE_KEY_UP, KEY_DOWN, KEY_UP, TICK,\r\n  ADD_SHIP, ATTEMPT_TO_LAND\r\n} from '../api/actions';\r\n\r\nimport initialState from '../initialState';\r\n\r\nimport {onTickProjectiles} from './onTickProjectiles';\r\nimport {onTickShip} from './onTickShip';\r\nimport {onTickShips} from './onTickShips';\r\nimport {onTickMessages} from './onTickMessages';\r\nimport {onTickFPS} from './onTickFPS';\r\nimport {fireWeapon} from './fireWeapon';\r\nimport {landOnPlanet} from './landOnPlanet';\r\nimport {collisionDetector} from './collisionDetector';\r\nimport {collisionResolver} from './collisionResolver';\r\n\r\nfunction onTick(state) {\r\n  const updatedStateWithFPS = onTickFPS(state);\r\n  const updatedStateWithPlayerShipMovement = onTickShip(updatedStateWithFPS);\r\n  const updatedStateWithShipsMovement = onTickShips(updatedStateWithPlayerShipMovement);\r\n  const updatedStateWithProjectileMovement = onTickProjectiles(updatedStateWithShipsMovement);\r\n  const updatedStateWithCollisions = collisionDetector(updatedStateWithProjectileMovement);\r\n  const updatedStateWithCollisionsResolved = collisionResolver(updatedStateWithCollisions);\r\n  const updatedStateWithCollisionsMessagesUpdated = onTickMessages(updatedStateWithCollisionsResolved);\r\n  return updatedStateWithCollisionsMessagesUpdated;\r\n}\r\n\r\nexport default function gameLoop(state = initialState, action) {\r\n  switch (action.type) {\r\n    case MOVE_KEY_DOWN:\r\n      return state.setIn(['keysDown', action.key], true);\r\n    case MOVE_KEY_UP:\r\n      return state.setIn(['keysDown', action.key], false);\r\n    case KEY_DOWN:\r\n      if (action.key === ' ') return fireWeapon(state);\r\n      if (action.key === 'l') return landOnPlanet(state, state.get('ship'));\r\n      break;\r\n    case ATTEMPT_TO_LAND:\r\n      break;\r\n    case ADD_SHIP:\r\n      const updatedCount = state.getIn(['ships', 'count']) + 1;\r\n      const updatedState = state.setIn(['ships', 'count'], updatedCount);\r\n      const shipWithId = action.ship.set('id', updatedCount);\r\n      return updatedState.setIn(['ships', 'list'],\r\n        updatedState.getIn(['ships', 'list']).push(shipWithId));\r\n    case TICK:\r\n      return onTick(state);\r\n  }\r\n  return state;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/gameLoop.js","import {Map, List} from 'immutable';\r\n\r\nexport const SPEED = 0.1;\r\nlet WIDTH = window.innerWidth;\r\nlet HEIGHT = window.innerHeight;\r\n\r\nconst initialState = new Map({\r\n  camera: new Map({\r\n    fieldOfView: 1000,\r\n    aspect: WIDTH / HEIGHT,\r\n    near: 1,\r\n    far: 100,\r\n    position: new Map({\r\n      x: 0,\r\n      y: 0,\r\n      z: 25\r\n    }),\r\n    rotation: new Map({\r\n      x: 0,\r\n      y: 0,\r\n      z: 0\r\n    }),\r\n    lookAt: new Map({\r\n      x: 0,\r\n      y: 0,\r\n      z: 0\r\n    })\r\n  }),\r\n  ship: new Map({\r\n    id: 1,\r\n    height: 40,\r\n    width: 40,\r\n    rotation: new Map({\r\n      x: -4.71,\r\n      y: 4.71,\r\n      z: 0\r\n    }),\r\n    position: new Map({\r\n      x: 0,\r\n      y: 0,\r\n      z: 0\r\n    }),\r\n    meshData: new Map({\r\n      scale: 0.25,\r\n      jsonUrl: './assets/meshes/ship.json'\r\n    })\r\n  }),\r\n  ships: new Map({\r\n    count: 3,\r\n    list: new List([new Map({\r\n      id: 1,\r\n      height: 40,\r\n      width: 40,\r\n      rotation: 90,\r\n      positionX: 200,\r\n      positionY: 500\r\n    }), new Map({\r\n      id: 2,\r\n      height: 40,\r\n      width: 40,\r\n      rotation: 0,\r\n      positionX: 600,\r\n      positionY: 200\r\n    }), new Map({\r\n      id: 3,\r\n      height: 40,\r\n      width: 40,\r\n      rotation: 135,\r\n      positionX: 300,\r\n      positionY: 400\r\n    })])\r\n  }),\r\n  keysDown: new Map(),\r\n  projectiles: new Map({\r\n    count: 0,\r\n    list: new List()\r\n  }),\r\n  collisions: new List(),\r\n  planets: new List([new Map({\r\n    height: 120,\r\n    width: 120,\r\n    positionX: 400,\r\n    positionY: 400,\r\n    type: 'blue',\r\n    name: 'Scorpion',\r\n    id: 1\r\n  })]),\r\n  messages: new Map({\r\n    count: 1,\r\n    list: new List([new Map({\r\n      text: 'Welcome to the game; use WASD to fly, spacebar to shoot and L to land on planets',\r\n      id: 1,\r\n      ticks: 200\r\n    })])\r\n  }),\r\n  ticks: 0,\r\n  fps: 60\r\n});\r\n\r\nexport default initialState;\n\n\n// WEBPACK FOOTER //\n// ./app/initialState.js","import {calculatePositionChange} from './movement';\r\n\r\nfunction filterVisibleProjectiles(projectile, index, projectiles) {\r\n  const positionX = projectile.get('positionX');\r\n  const positionY = projectile.get('positionY');\r\n  // console.log(`filtering: (${positionX}, ${positionY})`);\r\n  if (positionX > 1000 || positionX < -50 || positionY > 1000 || positionY < 0) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function onTickProjectiles(state) {\r\n  const projectiles = state.getIn(['projectiles', 'list']);\r\n  const projectilesAfterPruningOffscreen = projectiles.filter(filterVisibleProjectiles);\r\n  const stateWithVisibleProjectilesOnly = state.setIn(['projectiles', 'list'], projectilesAfterPruningOffscreen);\r\n\r\n  const stateWithProjectilePositionChanges = projectilesAfterPruningOffscreen\r\n    .reduce((updatedState, projectile, index) => {\r\n      const {positionX, positionY} = calculatePositionChange(\r\n        projectile.get('speed'),\r\n        projectile.get('rotation'),\r\n        projectile.get('positionX'),\r\n        projectile.get('positionY'));\r\n\r\n      let updatedProjectile = projectile.set('positionX', positionX).set('positionY', positionY);\r\n      return updatedState.setIn(['projectiles', 'list', index], updatedProjectile)\r\n    }, stateWithVisibleProjectilesOnly);\r\n\r\n  return stateWithProjectilePositionChanges;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/onTickProjectiles.js","import {SPEED} from '../initialState';\r\n\r\nexport function calculatePositionChange(distance, rotation, position) {\r\n  // console.log(`${distance}`);\r\n  const rotationRadians = rotation.y;\r\n  // const rotationRadians = yRotation === 0 ? 0 : Math.PI * yRotation / 180;\r\n\r\n  const {x, y, z} = position;\r\n  const distanceY = SPEED * distance * Math.sin(rotationRadians);\r\n  const distanceX = SPEED * distance * Math.cos(rotationRadians);\r\n  const distanceZ = 0;\r\n  // console.log(`rotation: ${rotationRadians}, x dist: ${distanceX}, y dist: ${distanceY}`);\r\n  return {\r\n    x: x + distanceX,\r\n    y: y + distanceY,\r\n    z: z + distanceZ\r\n  }\r\n}\r\n\r\nexport function calculateShipPosition(ship, speed) {\r\n  // dy = d * cos(rotation)\r\n  // dx = d * sin(rotation)\r\n  // could the compute cos and sin of angles up front in a map:\r\n  // rotation -> {cos(rotation), sin(rotation)}\r\n  const {x, y, z} = calculatePositionChange(\r\n    speed, {\r\n      x: ship.getIn(['rotation', 'x']),\r\n      y: ship.getIn(['rotation', 'y']),\r\n      z: ship.getIn(['rotation', 'z'])\r\n    }, {\r\n      x: ship.getIn(['position', 'x']),\r\n      y: ship.getIn(['position', 'y']),\r\n      z: ship.getIn(['position', 'z'])\r\n    });\r\n  let updatedState = ship\r\n    .setIn(['position', 'x'], x)\r\n    .setIn(['position', 'y'], y)\r\n    .setIn(['position', 'z'], z);\r\n  // console.log(`rotation: ${updatedState.get('rotation')}, position: ${updatedState.get('position')}`)\r\n  return updatedState;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/movement.js","import {Map, List} from 'immutable';\r\n\r\nimport {calculateShipPosition} from './movement';\r\n\r\nexport const TURN_SHIP = 'TURN_SHIP';\r\nexport const MOVE_SHIP_BW = 'MOVE_SHIP_BW';\r\nexport const MOVE_SHIP_FW = 'MOVE_SHIP_FW';\r\nexport const FIRE_WEAPON = 'FIRE_WEAPON';\r\n\r\nfunction buildKeysDownActions(keysDown) {\r\n  const defaultAmount = 0.1;\r\n  const activeActions = [];\r\n  if (keysDown.has('w')) {\r\n    activeActions.push({\r\n      type: MOVE_SHIP_FW,\r\n      speed: 3\r\n    });\r\n  }\r\n  if (keysDown.has('s')) {\r\n    activeActions.push({\r\n      type: MOVE_SHIP_BW,\r\n      speed: -1\r\n    });\r\n  }\r\n  if (keysDown.has('a')) {\r\n    activeActions.push({\r\n      type: TURN_SHIP,\r\n      amount: defaultAmount\r\n    });\r\n  }\r\n  if (keysDown.has('d')) {\r\n    activeActions.push({\r\n      type: TURN_SHIP,\r\n      amount: -defaultAmount\r\n    });\r\n  }\r\n  return new List(activeActions);\r\n}\r\n\r\nexport function onTickShip(state) {\r\n  const keysDown = state.get('keysDown');\r\n  const activeKeysDown = keysDown.filter((value, key) => value);\r\n\r\n  // update ship state\r\n  const activeActions = buildKeysDownActions(activeKeysDown);\r\n  return activeActions.reduce((updatedState, action) => {\r\n    switch (action.type) {\r\n      case TURN_SHIP:\r\n        return updatedState.setIn(['ship', 'rotation', 'y'],\r\n          updatedState.getIn(['ship', 'rotation', 'y']) + action.amount);\r\n      case MOVE_SHIP_FW:\r\n      case MOVE_SHIP_BW:\r\n        return updatedState.set('ship',\r\n          calculateShipPosition(updatedState.get('ship'), action.speed));\r\n    }\r\n  }, state);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/onTickShip.js","import {Map, List} from 'immutable';\r\n\r\nimport {calculatePositionChange} from './movement';\r\n\r\nfunction calculateNewPosition(state, speed) {\r\n  // dy = d * cos(rotation)\r\n  // dx = d * sin(rotation)\r\n  // could the compute cos and sin of angles up front in a map:\r\n  // rotation -> {cos(rotation), sin(rotation)}\r\n  const {positionX, positionY} = calculatePositionChange(\r\n    speed,\r\n    state.get('rotation'),\r\n    state.get('positionX'),\r\n    state.get('positionY'));\r\n  let updatedState = state.set('positionX', positionX);\r\n  updatedState = updatedState.set('positionY', positionY);\r\n  return updatedState;\r\n}\r\n\r\nexport function onTickShips(state) {\r\n  return state;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/onTickShips.js","export function onTickMessages(state) {\r\n  // decrement the ticks on each message\r\n  const messages = state.getIn(['messages', 'list']);\r\n  const updatedMessages = messages\r\n    // filter out messages that will expire on this tick\r\n    .filter((message) => {\r\n      const ticks = message.get('ticks');\r\n      return !(ticks - 1 < 0);\r\n    })\r\n    .map((message) => {\r\n      const ticks = message.get('ticks');\r\n      if (ticks) {\r\n        return message.set('ticks', ticks - 1);\r\n      }\r\n      return message;\r\n    });\r\n  return state.setIn(['messages', 'list'], updatedMessages);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/onTickMessages.js","let startTimeMilliSeconds = Math.trunc(new Date().valueOf());\r\n\r\nconst MAX_SAMPLING_TIME_MS_DELTA = 3000;\r\nconst MIN_FRAMES_PER_SEC = 25;\r\nconst MIN_FRAMES_PER_SAMPLE = MIN_FRAMES_PER_SEC * MAX_SAMPLING_TIME_MS_DELTA / 1000;\r\n\r\nexport function onTickFPS(state) {\r\n  const ticks = state.get('ticks');\r\n  const newTimeSeconds = Math.trunc(new Date().valueOf());\r\n  const timeDelta = newTimeSeconds - startTimeMilliSeconds;\r\n  let updatedState = state;\r\n  if (timeDelta >= MAX_SAMPLING_TIME_MS_DELTA) {\r\n    if (ticks < MIN_FRAMES_PER_SAMPLE) console.warn(`ticks are low at ${MAX_SAMPLING_TIME_MS_DELTA / 1000} seconds: ${ticks}`);\r\n    startTimeMilliSeconds = newTimeSeconds;\r\n    updatedState = state.set('ticks', 0);\r\n  }\r\n  const avgFps = Math.trunc(1000 * ticks / timeDelta);\r\n  return updatedState\r\n    .set('ticks', updatedState.get('ticks') + 1)\r\n    .set('fps', avgFps);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/onTickFPS.js","import {Map, List} from 'immutable';\r\n\r\nexport function fireWeapon(state) {\r\n  const ship = state.get('ship');\r\n  const rotation = ship.get('rotation'); // comes out same rotation as ship\r\n  const positionX = ship.get('positionX');\r\n  const positionY = ship.get('positionY');\r\n  const updatedCount = state.getIn(['projectiles', 'count']) + 1;\r\n\r\n  const newProjectileProps = new Map({\r\n    rotation, positionX, positionY,\r\n    height: 40,\r\n    width: 40,\r\n    speed: 15,\r\n    id: updatedCount\r\n  });\r\n\r\n  const currentProjectiles = state.getIn(['projectiles', 'list']);\r\n  const updatedProjectiles = currentProjectiles.push(newProjectileProps);\r\n  const updatedState =  state.setIn(['projectiles', 'count'], updatedCount);\r\n  return updatedState.setIn(['projectiles', 'list'], updatedProjectiles);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/fireWeapon.js","import {Map, List} from 'immutable';\r\n\r\nimport doCirclesOverlap from '../api/doCirclesOverlap';\r\nimport addMessage from './addMessage';\r\n\r\nconst LANDING_RANGE = 50;\r\nconst HAILING_RANGE = 100;\r\n\r\nexport function landOnPlanet(state, ship) {\r\n  const planets = state.get('planets');\r\n  const closestPlanet = findClosestPlanetInHailing(planets, ship);\r\n  if (!closestPlanet) {\r\n    return state;\r\n  }\r\n  const messageCount = state.getIn(['messages', 'count']);\r\n  let updatedMsgCount = messageCount + 1;\r\n  const hailResult = hailPlanet(closestPlanet, ship, updatedMsgCount);\r\n  if (hailResult.get('status') === 'ok') {\r\n    const existingMsgs = state.getIn(['messages', 'list']);\r\n    if (withinRange(closestPlanet, ship, LANDING_RANGE)) {\r\n      const landingResult = attemptLanding(closestPlanet, ship, messageCount);\r\n      const newMsg = landingResult.get('message');\r\n      const previousHailMessageIndex = existingMsgs.findIndex((message) => {\r\n        return message.get('text') == 'cleared for landing';\r\n      });\r\n      const existingMsgsWithoutHail =\r\n        previousHailMessageIndex != -1\r\n          ? existingMsgs.delete(previousHailMessageIndex)\r\n          : existingMsgs;\r\n      return addMessage(state.setIn(['messages', 'list'], existingMsgsWithoutHail), newMsg);\r\n    }\r\n    const newMsg = hailResult.get('message');\r\n    const updatedMsgs = existingMsgs.concat([newMsg]);\r\n    return state.setIn(['messages', 'count'], updatedMsgCount)\r\n      .setIn(['messages', 'list'], updatedMsgs);\r\n  }\r\n  return state;\r\n}\r\n\r\nfunction attemptLanding(planet, ship, messageCount) {\r\n  return new Map({\r\n    status: 'ok',\r\n    message: new Map({\r\n      text: `Welcome to ${planet.get('name')}`,\r\n      ticks: 80,\r\n      id: messageCount + 1\r\n    })\r\n  })\r\n}\r\n\r\nfunction hailPlanet(planet, ship, messageCount) {\r\n  if (allowedToLand(planet, ship)) {\r\n    return new Map({\r\n      status: 'ok',\r\n      message: new Map({\r\n        text: 'cleared for landing',\r\n        ticks: 200,\r\n        id: messageCount + 1\r\n      })\r\n    })\r\n  }\r\n  return new Map({\r\n    status: 'not_allowed',\r\n    message: new Map({\r\n      text: 'not allowed to land',\r\n      id: messageCount + 1\r\n    })\r\n  });\r\n}\r\n\r\nfunction allowedToLand(planet, ship) {\r\n  return true;\r\n}\r\n\r\nfunction findClosestPlanetInHailing(planets, ship) {\r\n  const planetsWithinRangeOfShip = planets.filter((planet) =>\r\n    withinRange(planet, ship, HAILING_RANGE)\r\n  );\r\n  // TODO: when there's multiple planets in range, do something\r\n  // smarter here and pick the closest one\r\n  const closestPlanet =\r\n    planetsWithinRangeOfShip.size == 1\r\n      ? planetsWithinRangeOfShip.first()\r\n      : planetsWithinRangeOfShip.reduce((closestPlanetSoFar, planet) => {\r\n      return closestPlanetSoFar;\r\n    }, planetsWithinRangeOfShip.get(0));\r\n  return closestPlanet;\r\n}\r\n\r\nfunction withinRange(planet, ship, range) {\r\n  // compare circles using the range plus the radii of the planet and ships\r\n  const planetX = planet.get('positionX');\r\n  const planetY = planet.get('positionY');\r\n  const planetHeight = planet.get('height');\r\n  const planetWidth = planet.get('width');\r\n  const shipX = ship.get('positionX');\r\n  const shipY = ship.get('positionY');\r\n  const shipHeight = ship.get('height');\r\n  const shipWidth = ship.get('width');\r\n\r\n  const planetRadius = planetWidth >= planetHeight ? planetWidth / 2 : planetHeight / 2;\r\n  const shipRadius = shipWidth >= shipHeight ? shipWidth / 2 : shipHeight / 2;\r\n  const planetCircle = {\r\n    center: {top: planetY + planetRadius, left: planetX + planetRadius},\r\n    radius: planetRadius + range\r\n  };\r\n  const shipCircle = {\r\n    center: {top: shipY + shipRadius, left: shipX + shipRadius},\r\n    radius: shipRadius\r\n  };\r\n  return doCirclesOverlap(planetCircle, shipCircle);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/landOnPlanet.js","export default function doCirclesOverlap(circle1, circle2) {\r\n  // find the distance between the centers and compare to the sum of the radii\r\n  const dx = circle1.center.top - circle2.center.top;\r\n  const dy = circle1.center.left - circle2.center.left;\r\n  // taking square roots is more expensive than squaring the sum of the radii\r\n  const dSqr = (dx * dx) + (dy * dy);\r\n  const radiusSumSqr = (circle1.radius + circle2.radius) * (circle1.radius + circle2.radius);\r\n  if (dSqr - radiusSumSqr < 500) {\r\n    // console.log(`difference between ${circle1.center.top} and ${circle2.center.top}`);\r\n    // console.log(`difference between ${circle1.center.left} and ${circle2.center.left}`);\r\n    // console.log(`collision close: ${dSqr} vs ${radiusSumSqr}`)\r\n  }\r\n  return dSqr <= radiusSumSqr;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/api/doCirclesOverlap.js","import {Map} from 'immutable';\r\n\r\nexport default function addMessage(state, message) {\r\n  const {text, ticks} = message;\r\n  const messages = state.get('messages');\r\n  const count = messages.get('count');\r\n  const list = messages.get('list');\r\n  const updatedMsgList = list.push(new Map({\r\n    id: count + 1,\r\n    text, ticks\r\n  }));\r\n  return state.setIn(['messages', 'list'], updatedMsgList)\r\n    .setIn(['messages', 'count'], count + 1);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/addMessage.js","import {Map, List} from 'immutable';\r\n\r\nimport doCirclesOverlap from '../api/doCirclesOverlap';\r\n\r\nfunction findOverlap(obj1, obj2) {\r\n  const obj1Height = obj1.get('height');\r\n  const obj1Width = obj1.get('width');\r\n  const obj1X = obj1.get('positionX');\r\n  const obj1Y = obj1.get('positionY');\r\n  const obj2Height = obj2.get('height');\r\n  const obj2Width = obj2.get('width');\r\n  const obj2X = obj2.get('positionX');\r\n  const obj2Y = obj2.get('positionY');\r\n  // use overlapping circles to determine if there's a collision\r\n  // create circles for each obj\r\n  const obj1Radius = obj1Width >= obj1Height ? obj1Width / 2 : obj1Height / 2;\r\n  const circle1 = {\r\n    center: {top: obj1Y + obj1Radius, left: obj1X + obj1Radius},\r\n    radius: obj1Radius\r\n  };\r\n  const obj2Radius = obj2Width >= obj2Height ? obj2Width / 2 : obj2Height / 2;\r\n  const circle2 = {\r\n    center: {top: obj2Y + obj2Radius, left: obj2X + obj2Radius},\r\n    radius: obj2Radius\r\n  };\r\n  // find if the circles overlap\r\n  // TODO: find direction/side that the collision happened?\r\n  return doCirclesOverlap(circle1, circle2);\r\n}\r\n\r\nexport function collisionDetector(state) {\r\n  const projectiles = state.getIn(['projectiles', 'list']);\r\n  const ships = state.getIn(['ships', 'list']);\r\n  const updatedStateWithCollisions = projectiles.reduce((updatedState, projectile, projectileIndex) => {\r\n    const existingCollisionsDetected = updatedState.get('collisions');\r\n    const collisionsFound = ships\r\n      .filter((ship) =>\r\n        findOverlap(projectile, ship))\r\n      .map((ship) => {\r\n        // console.log(`collision detected`);\r\n        // console.log(`collision detected: projectile: ${projectile}, ship: ${ship}`);\r\n        // return a collision record to be resolved\r\n        return new Map({\r\n          projectile, ship\r\n        });\r\n      });\r\n    return updatedState.set('collisions', collisionsFound.concat(existingCollisionsDetected));\r\n  }, state);\r\n  return updatedStateWithCollisions;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/collisionDetector.js","import {Map, List} from 'immutable';\r\n\r\nimport addMessage from './addMessage';\r\n\r\nfunction resolveCollision(state, collision) {\r\n  if (!collision) return state;\r\n  const projectile = collision.get('projectile');\r\n  const projectileId = projectile.get('id');\r\n  const ship = collision.get('ship');\r\n  const shipId = ship.get('id');\r\n  // console.log(`resolving collision: projectile: ${projectile}, ship: ${ship}`);\r\n  const projectileIndex = state.getIn(['projectiles', 'list']).findIndex((projectile) => {\r\n    return projectile.get('id') == projectileId;\r\n  });\r\n  const shipIndex = state.getIn(['ships', 'list']).findIndex((ship) => {\r\n    return ship.get('id') == shipId;\r\n  });\r\n  const stateWithoutProjectile = state.deleteIn(['projectiles', 'list', projectileIndex]);\r\n  const stateWithoutShip = stateWithoutProjectile.deleteIn(['ships', 'list', shipIndex]);\r\n  return stateWithoutShip;\r\n}\r\n\r\nexport function collisionResolver(state) {\r\n  const collisions = state.get('collisions');\r\n  if (collisions.size > 0) {\r\n    const stateWithResolvedCollisions = collisions.reduce((updatedState, collision) => {\r\n      const message = {\r\n        text: 'Ship was destroyed',\r\n        ticks: 100\r\n      };\r\n      const stateWithMessage = addMessage(updatedState, message);\r\n      // console.log(`adding message: ${message.text}`);\r\n      return resolveCollision(stateWithMessage, collision);\r\n    }, state);\r\n    return stateWithResolvedCollisions.set('collisions', new List());\r\n  }\r\n  return state;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/reducers/collisionResolver.js","import {\r\n  PerspectiveCamera,\r\n  WebGLRenderer,\r\n  Mesh,\r\n  MeshNormalMaterial,\r\n  Scene,\r\n  JSONLoader,\r\n  AmbientLight,\r\n  EdgesGeometry,\r\n  LineBasicMaterial,\r\n  LineSegments,\r\n  Vector3\r\n} from 'three';\r\n\r\nimport DomEvents from 'threex.domevents';\r\n\r\nlet scene, camera, renderer;\r\nlet cube;\r\nlet SPEED = 0.01;\r\nlet WIDTH = window.innerWidth;\r\nlet HEIGHT = window.innerHeight;\r\n\r\nlet domEvents;\r\n\r\nlet _unsubscribe, _store;\r\n\r\nlet mesh = null;\r\nfunction initShip(ship) {\r\n  const shipMeshData = ship.get('meshData');\r\n  let loader = new JSONLoader();\r\n  loader.load(shipMeshData.get('jsonUrl'), function (geometry, materials) {\r\n    // meshnormalmaterial is a solid color\r\n    let material = new MeshNormalMaterial(materials[0]);\r\n    mesh = new Mesh(geometry, material);\r\n    mesh.scale.x = mesh.scale.y = mesh.scale.z = shipMeshData.get('scale');\r\n    mesh.translation = geometry.center();\r\n    mesh.position.x = ship.getIn(['position', 'x']);\r\n    mesh.position.y = ship.getIn(['position', 'y']);\r\n    mesh.position.z = ship.getIn(['position', 'z']);\r\n    scene.add(mesh);\r\n\r\n    // wireframe\r\n    let geo = new EdgesGeometry(mesh.geometry); // or WireframeGeometry\r\n    let mat = new LineBasicMaterial({color: 0x000000, linewidth: 2});\r\n    let wireframe = new LineSegments(geo, mat);\r\n    mesh.add(wireframe);\r\n\r\n    rotateMesh();\r\n  });\r\n}\r\n\r\nfunction rotateMesh() {\r\n  if (!mesh) {\r\n    return;\r\n  }\r\n  // TODO: add a key command for this and adjust until its right - then investigate why\r\n  mesh.rotation.set(1.57, 4.71, 0);\r\n}\r\n\r\nexport function init(store) {\r\n  _store = store;\r\n  _unsubscribe = store.subscribe(() =>\r\n    console.log(store.getState())\r\n  );\r\n\r\n  scene = new Scene();\r\n  initShip(_store.getState().gameLoop.get('ship'));\r\n  initCamera(_store.getState().gameLoop.get('camera'));\r\n  initLights();\r\n  initRenderer();\r\n\r\n  document.body.appendChild(renderer.domElement);\r\n  // domEvents\t= new DomEvents(camera, renderer.domElement);\r\n  //\r\n  // domEvents.addEventListener(cube, 'click', () => {\r\n  //   console.log('clicked');\r\n  // });\r\n  render();\r\n}\r\n\r\nfunction initLights() {\r\n  let light = new AmbientLight(0xffffff);\r\n  scene.add(light);\r\n}\r\n\r\nfunction initCamera(cameraData) {\r\n  camera = new PerspectiveCamera(\r\n    cameraData.get('fieldOfView'),\r\n    cameraData.get('aspect'),\r\n    cameraData.get('near'),\r\n    cameraData.get('far'));\r\n  camera.rotation.set(\r\n    cameraData.getIn(['rotation', 'x']),\r\n    cameraData.getIn(['rotation', 'y']),\r\n    cameraData.getIn(['rotation', 'z']));\r\n  camera.position.set(\r\n    cameraData.getIn(['position', 'x']),\r\n    cameraData.getIn(['position', 'y']),\r\n    cameraData.getIn(['position', 'z']));\r\n  camera.lookAt(\r\n    new Vector3(cameraData.getIn(['lookAt', 'x']),\r\n      cameraData.getIn(['lookAt', 'y']),\r\n      cameraData.getIn(['lookAt', 'z'])));\r\n}\r\n\r\nfunction initRenderer() {\r\n  renderer = new WebGLRenderer({antialias: true});\r\n  renderer.setSize(WIDTH, HEIGHT);\r\n}\r\n\r\nfunction render() {\r\n  requestAnimationFrame(render);\r\n  // rotateMesh();\r\n  renderer.render(scene, camera);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/canvas.js","import React, {PureComponent} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {addShip, handleInputKeyDown, handleInputKeyUp, loopTick} from './api/actions';\r\nimport {\r\n  PerspectiveCamera,\r\n  WebGLRenderer,\r\n  Mesh,\r\n  MeshNormalMaterial,\r\n  Scene,\r\n  JSONLoader,\r\n  AmbientLight,\r\n  EdgesGeometry,\r\n  LineBasicMaterial,\r\n  LineSegments,\r\n  Vector3\r\n} from 'three';\r\nimport Promise from 'bluebird';\r\n\r\nimport Message from './components/Message';\r\n\r\nconst LOOP_INTERVALS = 25;\r\nlet WIDTH = 600;\r\nlet HEIGHT = 600;\r\n\r\nclass AppComponent extends PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this._loopInterval = null;\r\n\r\n    this.state = {\r\n      loopRequest: 0\r\n    };\r\n\r\n    this.onButtonClick = this._onButtonClick.bind(this);\r\n    this.onKeyDown = this._onKeyDown.bind(this);\r\n    this.onKeyUp = this._onKeyUp.bind(this);\r\n    this.onLoopTick = this._onLoopTick.bind(this);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <div className=\"interface\">\r\n          <div className=\"top-bar\">\r\n            <button className=\"menu-button\" onClick={() =>\r\n              this.onButtonClick()}>\r\n              Add Ship\r\n            </button>\r\n          </div>\r\n          <div id=\"canvasContainer\">\r\n          </div>\r\n          <div className=\"bottom-bar\">\r\n            <div>FPS: {this.props.gameLoop.get('fps')}</div>\r\n            <div>{this._renderMessages()}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  _renderMessages() {\r\n    return this.props.gameLoop\r\n      .getIn(['messages', 'list'])\r\n      .map((message, index) =>\r\n        <Message key={message.get('id')} data={message}/>\r\n      )\r\n  }\r\n\r\n  _onButtonClick() {\r\n    this.props.onButtonClick()\r\n  }\r\n\r\n  _onKeyDown(event) {\r\n    this.props.onKeyDown(event.key);\r\n  }\r\n\r\n  _onKeyUp(event) {\r\n    this.props.onKeyUp(event.key);\r\n  }\r\n\r\n  _onLoopTick() {\r\n    this.props.onLoopTick();\r\n\r\n    // update scene with state\r\n    updateShip(this._ship, this.props.gameLoop.get('ship'));\r\n\r\n    this._renderer.render(this._scene, this._camera);\r\n    this._loopInterval = window.setTimeout(this.onLoopTick, LOOP_INTERVALS);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.onKeyDown);\r\n    window.addEventListener(\"keyup\", this.onKeyUp);\r\n    this._loopInterval = window.setTimeout(this.onLoopTick, LOOP_INTERVALS);\r\n\r\n    const {gameLoop} = this.props;\r\n\r\n    this._scene = new Scene();\r\n    this._renderer = this._initRenderer();\r\n    this._camera = this._initCamera(gameLoop.get('camera'));\r\n    this._lights = this._initLights(gameLoop.get('lights'));\r\n    this._initShip(gameLoop.get('ship')).then((shipMesh) => {\r\n      this._ship = shipMesh;\r\n    });\r\n    document.getElementById('canvasContainer').appendChild(this._renderer.domElement);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.onKeyDown);\r\n    window.removeEventListener(\"keyup\", this.onKeyUp);\r\n    window.clearTimeout(this._loopInterval);\r\n    this._loopInterval = null;\r\n  }\r\n\r\n  _initShip(ship) {\r\n    const shipMeshData = ship.get('meshData');\r\n\r\n    let loader = new JSONLoader();\r\n    let promise = new Promise((resolve, reject) => {\r\n      loader.load(shipMeshData.get('jsonUrl'), (geometry, materials) => {\r\n        resolve({geometry, materials});\r\n      });\r\n    });\r\n    return promise.then((jsonData) => {\r\n      const {geometry, materials} = jsonData;\r\n      // meshnormalmaterial is a solid color\r\n      let material = new MeshNormalMaterial(materials[0]);\r\n      let mesh = new Mesh(geometry, material);\r\n      mesh.scale.x = mesh.scale.y = mesh.scale.z = shipMeshData.get('scale');\r\n      mesh.translation = geometry.center();\r\n      mesh.position.x = ship.getIn(['position', 'x']);\r\n      mesh.position.y = ship.getIn(['position', 'y']);\r\n      mesh.position.z = ship.getIn(['position', 'z']);\r\n      this._scene.add(mesh);\r\n\r\n      // wireframe\r\n      let geo = new EdgesGeometry(mesh.geometry); // or WireframeGeometry\r\n      let mat = new LineBasicMaterial({color: 0x000000, linewidth: 2});\r\n      let wireframe = new LineSegments(geo, mat);\r\n      mesh.add(wireframe);\r\n      return mesh;\r\n    });\r\n  }\r\n\r\n  _initCamera(cameraData) {\r\n    const camera = new PerspectiveCamera(\r\n      cameraData.get('fieldOfView'),\r\n      cameraData.get('aspect'),\r\n      cameraData.get('near'),\r\n      cameraData.get('far'));\r\n    camera.rotation.set(\r\n      cameraData.getIn(['rotation', 'x']),\r\n      cameraData.getIn(['rotation', 'y']),\r\n      cameraData.getIn(['rotation', 'z']));\r\n    camera.position.set(\r\n      cameraData.getIn(['position', 'x']),\r\n      cameraData.getIn(['position', 'y']),\r\n      cameraData.getIn(['position', 'z']));\r\n    camera.lookAt(\r\n      new Vector3(cameraData.getIn(['lookAt', 'x']),\r\n        cameraData.getIn(['lookAt', 'y']),\r\n        cameraData.getIn(['lookAt', 'z'])));\r\n    return camera;\r\n  }\r\n\r\n  _initRenderer() {\r\n    const renderer = new WebGLRenderer({antialias: true});\r\n    renderer.setSize(WIDTH, HEIGHT);\r\n    return renderer;\r\n  }\r\n\r\n  _initLights() {\r\n    let light = new AmbientLight(0xffffff);\r\n    this._scene.add(light);\r\n    return light;\r\n  }\r\n}\r\n\r\n// move these to separate files:\r\nfunction updateShip(ship, shipState) {\r\n  if (!ship) return;\r\n  ship.position.x = shipState.getIn(['position', 'x']);\r\n  ship.position.y = shipState.getIn(['position', 'y']);\r\n  ship.position.z = shipState.getIn(['position', 'z']);\r\n  ship.rotation.x = shipState.getIn(['rotation', 'x']);\r\n  ship.rotation.y = shipState.getIn(['rotation', 'y']);\r\n  ship.rotation.z = shipState.getIn(['rotation', 'z']);\r\n\r\n}\r\n\r\nAppComponent.propTypes = {\r\n  count: React.PropTypes.number,\r\n  gameLoop: React.PropTypes.object\r\n};\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    count: state.base.count,\r\n    gameLoop: state.gameLoop\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onButtonClick: () => {\r\n      dispatch(addShip())\r\n    },\r\n    onKeyDown: (key) => {\r\n      dispatch(handleInputKeyDown(key));\r\n    },\r\n    onKeyUp: (key) => {\r\n      dispatch(handleInputKeyUp(key));\r\n    },\r\n    onLoopTick: () => {\r\n      dispatch(loopTick());\r\n    }\r\n  }\r\n};\r\n\r\nconst App = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AppComponent);\r\n\r\nexport default App;\n\n\n// WEBPACK FOOTER //\n// ./app/app.js","import React, {Component} from 'react';\r\n\r\nclass Message extends Component {\r\n  render() {\r\n    const messageText = this.props.data.get('text');\r\n    return (\r\n      <div className=\"message\">{messageText}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Message;\n\n\n// WEBPACK FOOTER //\n// ./app/components/Message.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./main.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./main.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./main.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/main.css\n// module id = 225\n// module chunks = 0","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"body{background:#add8e6;margin:0;padding:0}.outline{border:1px solid #000;border-radius:20px}.interface{display:flex;flex-direction:column;justify-content:space-between;height:700px}.top-bar{height:50px;width:90%;background-color:grey;padding-top:10px;padding-left:10px}.menu-button{height:30px}.message-bar{height:50px;width:90%;background-color:grey;padding-top:10px;padding-left:10px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./app/main.css\n// module id = 226\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 228\n// module chunks = 0"],"sourceRoot":""}